  [1m[35m (0.8ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateClients (20210905191045)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "clients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "phone_number" varchar, "address" varchar, "city" varchar, "country" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191045"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateAccounts (20210905191051)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "account_number" varchar, "balance" decimal, "currency" varchar, "status" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_b1e30bebc8"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_user_id" ON "accounts" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191051"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateTransfers (20210905191738)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateTransfers (20210905191738)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateTransfers (20210905191738)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateTransfers (20210905191738)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateTransfers (20210905191738)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateTransfers (20210905191738)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateTransfers (20210905191738)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateTransfers (20210905191738)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateTransfers (20210905191738)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transferor_id" integer, "transferee_id" integer, "execution_date" date, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_22584f0037"
FOREIGN KEY ("transferor_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_84ddda26f0"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191738"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateTransactions (20210905191826)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transaction_number" varchar, "account_id" integer NOT NULL, "amount" decimal, "transaction_type" varchar, "description" varchar, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_01f020e267"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_86d9416874"
FOREIGN KEY ("transfer_id")
  REFERENCES "transfers" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_account_id" ON "transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_transfer_id" ON "transactions" ("transfer_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191826"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-09-05 19:42:48.938323"], ["updated_at", "2021-09-05 19:42:48.938323"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/" for 127.0.0.1 at 2021-09-05 21:48:57 +0200
  [1m[35m (0.5ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [POST] "/"):
  
Started POST "/clients" for 127.0.0.1 at 2021-09-05 22:14:25 +0200
  [1m[35m (0.7ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ClientsController#create as */*
  Parameters: {"first_name"=>"Mentor", "last_name"=>"Nila", "phone_number"=>"38649841109"}
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.0ms | Allocations: 4290)


  
SyntaxError (/Users/mentornila/Sites/visablebank/app/models/client.rb:2: syntax error, unexpected local variable or method, expecting `end'
...st_name, :phone_number presence: true
...                       ^~~~~~~~
):
  
app/models/client.rb:2: syntax error, unexpected local variable or method, expecting `end'
app/models/client.rb:2: syntax error, unexpected local variable or method, expecting `end'
app/controllers/clients_controller.rb:18:in `create'
Started POST "/clients" for 127.0.0.1 at 2021-09-05 22:16:22 +0200
Processing by ClientsController#create as */*
  Parameters: {"first_name"=>"Mentor", "last_name"=>"Nila", "phone_number"=>"38649841109"}
Completed 500 Internal Server Error in 0ms (Allocations: 241)


  
SyntaxError (/Users/mentornila/Sites/visablebank/app/models/client.rb:2: syntax error, unexpected local variable or method, expecting `end'
... validates :first_name presence: true
...                       ^~~~~~~~
/Users/mentornila/Sites/visablebank/app/models/client.rb:3: syntax error, unexpected local variable or method, expecting `end'
  validates :last_name presence: true
                       ^~~~~~~~
/Users/mentornila/Sites/visablebank/app/models/client.rb:4: syntax error, unexpected local variable or method, expecting `end'
...alidates :phone_number presence: true
...                       ^~~~~~~~
):
  
app/models/client.rb:2: syntax error, unexpected local variable or method, expecting `end'
app/models/client.rb:3: syntax error, unexpected local variable or method, expecting `end'
app/models/client.rb:4: syntax error, unexpected local variable or method, expecting `end'
app/models/client.rb:2: syntax error, unexpected local variable or method, expecting `end'
app/models/client.rb:3: syntax error, unexpected local variable or method, expecting `end'
app/models/client.rb:4: syntax error, unexpected local variable or method, expecting `end'
app/controllers/clients_controller.rb:18:in `create'
Started POST "/clients" for 127.0.0.1 at 2021-09-05 22:16:51 +0200
Processing by ClientsController#create as */*
  Parameters: {"first_name"=>"Mentor", "last_name"=>"Nila", "phone_number"=>"38649841109"}
Completed 400 Bad Request in 6ms (Allocations: 2260)


  
ActionController::ParameterMissing (param is missing or the value is empty: client
Did you mean?  action
               controller
               last_name
               first_name):
  
app/controllers/clients_controller.rb:49:in `client_params'
app/controllers/clients_controller.rb:18:in `create'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.4ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "MENTOR"], ["last_name", "NILA"], ["phone_number", "38649841109"], ["created_at", "2021-09-05 20:19:21.130260"], ["updated_at", "2021-09-05 20:19:21.130260"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.1ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "JON"], ["last_name", "NILA"], ["phone_number", "38649841110"], ["created_at", "2021-09-05 20:19:21.132456"], ["updated_at", "2021-09-05 20:19:21.132456"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Started GET "/clients" for 127.0.0.1 at 2021-09-05 22:19:31 +0200
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ClientsController#index as */*
  Parameters: {"first_name"=>"Mentor", "last_name"=>"Nila", "phone_number"=>"38649841109"}
  [1m[36mClient Load (0.3ms)[0m  [1m[34mSELECT "clients".* FROM "clients"[0m
  ↳ app/controllers/clients_controller.rb:8:in `index'
Completed 200 OK in 9ms (Views: 3.6ms | ActiveRecord: 0.4ms | Allocations: 9478)


  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.4ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "MENTOR"], ["last_name", "NILA"], ["phone_number", "38649841109"], ["created_at", "2021-09-05 20:22:03.525645"], ["updated_at", "2021-09-05 20:22:03.525645"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.1ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "JON"], ["last_name", "NILA"], ["phone_number", "38649841110"], ["created_at", "2021-09-05 20:22:03.527737"], ["updated_at", "2021-09-05 20:22:03.527737"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateClients (20210905191045)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "clients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "phone_number" varchar, "address" varchar, "city" varchar, "country" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191045"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateAccounts (20210905191051)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "client_id" integer NOT NULL, "account_number" varchar, "balance" decimal, "currency" varchar, "status" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_65d703860a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191051"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateTransfers (20210905191738)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transferor_id" integer, "transferee_id" integer, "execution_date" date, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_22584f0037"
FOREIGN KEY ("transferor_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_84ddda26f0"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191738"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateTransactions (20210905191826)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transaction_number" varchar, "account_id" integer NOT NULL, "amount" decimal, "transaction_type" varchar, "description" varchar, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_01f020e267"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_86d9416874"
FOREIGN KEY ("transfer_id")
  REFERENCES "transfers" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_account_id" ON "transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transactions_on_transfer_id" ON "transactions" ("transfer_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191826"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-09-05 20:23:03.205784"], ["updated_at", "2021-09-05 20:23:03.205784"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "MENTOR"], ["last_name", "NILA"], ["phone_number", "38649841109"], ["created_at", "2021-09-05 20:23:13.180279"], ["updated_at", "2021-09-05 20:23:13.180279"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.1ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "JON"], ["last_name", "NILA"], ["phone_number", "38649841110"], ["created_at", "2021-09-05 20:23:13.182741"], ["updated_at", "2021-09-05 20:23:13.182741"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:00:07 +0200
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransfersController#create as */*
  Parameters: {"transforor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"123"}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 158)


  
ArgumentError (wrong number of arguments (given 4, expected 1)):
  
app/controllers/transfers_controller.rb:19:in `transfer_params'
app/controllers/transfers_controller.rb:5:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:02:33 +0200
Processing by TransfersController#create as */*
  Parameters: {"transforor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"123"}
Completed 400 Bad Request in 7ms (Allocations: 214)


  
ActionController::ParameterMissing (param is missing or the value is empty: transferor_id
Did you mean?  transferee_id
               transforor_id
               execution_date
               controller):
  
app/controllers/transfers_controller.rb:19:in `transfer_params'
app/controllers/transfers_controller.rb:5:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:03:14 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"123"}
Completed 500 Internal Server Error in 0ms (Allocations: 110)


  
SystemExit (exit):
  
app/controllers/transfers_controller.rb:6:in `abort'
app/controllers/transfers_controller.rb:6:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:03:42 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"123"}
Completed 500 Internal Server Error in 1ms (Allocations: 257)


  
SyntaxError (/Users/mentornila/Sites/visablebank/app/services/transfer_creator.rb:24: syntax error, unexpected local variable or method, expecting '}'
          execution_date: @execution_date
          ^~~~~~~~~~~~~~
):
  
app/services/transfer_creator.rb:24: syntax error, unexpected local variable or method, expecting '}'
app/services/transfer_creator.rb:24: syntax error, unexpected local variable or method, expecting '}'
app/controllers/transfers_controller.rb:6:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:04:51 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
Completed 500 Internal Server Error in 1ms (Allocations: 261)


  
ArgumentError (wrong number of arguments (given 1, expected 4)):
  
app/services/transfer_creator.rb:2:in `initialize'
app/controllers/transfers_controller.rb:5:in `new'
app/controllers/transfers_controller.rb:5:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:06:25 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
Completed 500 Internal Server Error in 1ms (Allocations: 99)


  
ArgumentError (wrong number of arguments (given 1, expected 4)):
  
app/services/transfer_creator.rb:2:in `initialize'
app/controllers/transfers_controller.rb:5:in `new'
app/controllers/transfers_controller.rb:5:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:06:46 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
Completed 500 Internal Server Error in 1ms (Allocations: 733)


  
NoMethodError (undefined method `to_model' for #<TransferCreator:0x000000014804dbb8 @transferor_id="1", @transferee_id="2", @amount="500", @execution_date="2021-09-01">
Did you mean?  to_yaml):
  
app/controllers/transfers_controller.rb:13:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:08:43 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
Completed 500 Internal Server Error in 2ms (Allocations: 958)


  
NoMethodError (undefined method `send_funds' for TransferCreator:Class):
  
app/controllers/transfers_controller.rb:5:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:10:02 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
Completed 500 Internal Server Error in 1ms (Allocations: 182)


  
ArgumentError (wrong number of arguments (given 0, expected 4)):
  
app/services/transfer_creator.rb:2:in `initialize'
app/controllers/transfers_controller.rb:5:in `new'
app/controllers/transfers_controller.rb:5:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:10:24 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.6ms | Allocations: 7482)


  
ActiveModel::UnknownAttributeError (unknown attribute 'transfer_type' for Transaction.):
  
app/services/transfer_creator.rb:11:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:10:44 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (1.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransaction Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mCACHE Transaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mTransfer Create (1.1ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:10:44.674027"], ["updated_at", "2021-09-05 21:10:44.674027"]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 36ms (ActiveRecord: 3.7ms | Allocations: 17652)


  
ActiveRecord::InvalidForeignKey (SQLite3::ConstraintException: FOREIGN KEY constraint failed):
  
app/services/transfer_creator.rb:21:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
Started GET "/clients" for 127.0.0.1 at 2021-09-05 23:14:05 +0200
Processing by ClientsController#index as */*
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/clients_controller.rb:8:in `index'
  [1m[36mClient Load (0.7ms)[0m  [1m[34mSELECT "clients".* FROM "clients"[0m
  ↳ app/controllers/clients_controller.rb:8:in `index'
Completed 200 OK in 13ms (Views: 11.2ms | ActiveRecord: 1.1ms | Allocations: 6834)


Started GET "/accounts" for 127.0.0.1 at 2021-09-05 23:14:16 +0200
Processing by AccountsController#index as */*
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  ↳ app/controllers/accounts_controller.rb:8:in `index'
Completed 200 OK in 4ms (Views: 1.3ms | ActiveRecord: 0.4ms | Allocations: 1512)


  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.4ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "MENTOR"], ["last_name", "NILA"], ["phone_number", "38649841109"], ["created_at", "2021-09-05 21:14:24.986950"], ["updated_at", "2021-09-05 21:14:24.986950"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.1ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "JON"], ["last_name", "NILA"], ["phone_number", "38649841110"], ["created_at", "2021-09-05 21:14:24.989221"], ["updated_at", "2021-09-05 21:14:24.989221"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
Started GET "/accounts" for 127.0.0.1 at 2021-09-05 23:14:26 +0200
Processing by AccountsController#index as */*
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  ↳ app/controllers/accounts_controller.rb:8:in `index'
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.1ms | Allocations: 633)


  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.3ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
Started GET "/accounts" for 127.0.0.1 at 2021-09-05 23:15:02 +0200
Processing by AccountsController#index as */*
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  ↳ app/controllers/accounts_controller.rb:8:in `index'
Completed 200 OK in 3ms (Views: 2.7ms | ActiveRecord: 0.1ms | Allocations: 632)


  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.5ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "MENTOR"], ["last_name", "NILA"], ["phone_number", "38649841109"], ["created_at", "2021-09-05 21:16:51.278241"], ["updated_at", "2021-09-05 21:16:51.278241"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.1ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "JON"], ["last_name", "NILA"], ["phone_number", "38649841110"], ["created_at", "2021-09-05 21:16:51.280378"], ["updated_at", "2021-09-05 21:16:51.280378"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "4f6e1788-a57e-4955-b1ef-a70c27f2d98c"], ["LIMIT", 1]]
  [1m[36mAccount Create (5.8ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 1], ["account_number", "4f6e1788-a57e-4955-b1ef-a70c27f2d98c"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 21:16:51.291190"], ["updated_at", "2021-09-05 21:16:51.291190"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "f1e96a63-f2da-4a3f-98ee-1b805b90d73f"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 2], ["account_number", "f1e96a63-f2da-4a3f-98ee-1b805b90d73f"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 21:16:51.302359"], ["updated_at", "2021-09-05 21:16:51.302359"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Started GET "/accounts" for 127.0.0.1 at 2021-09-05 23:16:54 +0200
Processing by AccountsController#index as */*
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/accounts_controller.rb:8:in `index'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  ↳ app/controllers/accounts_controller.rb:8:in `index'
Completed 200 OK in 14ms (Views: 12.5ms | ActiveRecord: 1.1ms | Allocations: 6469)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:16:58 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.8ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:16:58.736747"], ["updated_at", "2021-09-05 21:16:58.736747"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mCACHE Transaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 201 Created in 39ms (Views: 4.4ms | ActiveRecord: 2.1ms | Allocations: 18246)


Started POST "/transactions" for 127.0.0.1 at 2021-09-05 23:17:29 +0200
Processing by TransactionsController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
Completed 400 Bad Request in 3ms (ActiveRecord: 0.0ms | Allocations: 195)


  
ActionController::ParameterMissing (param is missing or the value is empty: transaction
Did you mean?  transferor_id
               transferee_id
               amount
               execution_date):
  
app/controllers/transactions_controller.rb:49:in `transaction_params'
app/controllers/transactions_controller.rb:18:in `create'
Started GET "/transactions" for 127.0.0.1 at 2021-09-05 23:17:40 +0200
Processing by TransactionsController#index as */*
  [1m[36mTransaction Load (0.2ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  ↳ app/controllers/transactions_controller.rb:8:in `index'
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.2ms | Allocations: 691)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:17:46 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.4ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:17:46.079791"], ["updated_at", "2021-09-05 21:17:46.079791"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mCACHE Transaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 201 Created in 12ms (Views: 0.5ms | ActiveRecord: 1.9ms | Allocations: 4575)


Started GET "/transfers" for 127.0.0.1 at 2021-09-05 23:18:30 +0200
  
AbstractController::ActionNotFound (The action 'index' could not be found for TransfersController
Did you mean?  create):
  
actionpack (6.1.4.1) lib/abstract_controller/base.rb:160:in `process'
actionpack (6.1.4.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.4.1) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.4.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.4.1) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.4.1) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.4.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.4.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.4.1) lib/action_dispatch/routing/route_set.rb:842:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
activerecord (6.1.4.1) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.4.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.4.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.4.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.4.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.4.1) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.4.1) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.4.1) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.4.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.4.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/host_authorization.rb:98:in `call'
railties (6.1.4.1) lib/rails/engine.rb:539:in `call'
puma (5.4.0) lib/puma/configuration.rb:249:in `call'
puma (5.4.0) lib/puma/request.rb:77:in `block in handle_request'
puma (5.4.0) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.4.0) lib/puma/request.rb:76:in `handle_request'
puma (5.4.0) lib/puma/server.rb:440:in `process_client'
puma (5.4.0) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:20:53 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.6ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:20:53.225117"], ["updated_at", "2021-09-05 21:20:53.225117"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mCACHE Transaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 201 Created in 23ms (Views: 0.2ms | ActiveRecord: 1.7ms | Allocations: 4574)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:21:03 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.6ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:21:03.253425"], ["updated_at", "2021-09-05 21:21:03.253425"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mTransaction Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mCACHE Transaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 201 Created in 13ms (Views: 0.5ms | ActiveRecord: 1.8ms | Allocations: 4568)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:22:58 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.5ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:22:58.152579"], ["updated_at", "2021-09-05 21:22:58.152579"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 15ms (ActiveRecord: 2.7ms | Allocations: 7641)


  
NoMethodError (undefined method `id' for [#<Transfer id: nil, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 21:22:58.152579000 +0000", updated_at: "2021-09-05 21:22:58.152579000 +0000">]:Array):
  
app/services/transfer_creator.rb:20:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:24:59 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.4ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:24:59.372749"], ["updated_at", "2021-09-05 21:24:59.372749"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 11ms (ActiveRecord: 1.0ms | Allocations: 2840)


  
NoMethodError (undefined method `id' for [#<Transfer id: nil, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 21:24:59.372749000 +0000", updated_at: "2021-09-05 21:24:59.372749000 +0000">]:Array):
  
app/services/transfer_creator.rb:20:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:27:15 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.7ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:27:15.789404"], ["updated_at", "2021-09-05 21:27:15.789404"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 18ms (ActiveRecord: 2.4ms | Allocations: 6386)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/services/transfer_creator.rb:20:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:27:37 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:27:37.351361"], ["updated_at", "2021-09-05 21:27:37.351361"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 10ms (ActiveRecord: 1.6ms | Allocations: 6489)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/services/transfer_creator.rb:21:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:28:00 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:28:00.998473"], ["updated_at", "2021-09-05 21:28:00.998473"]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.9ms | Allocations: 6499)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/services/transfer_creator.rb:19:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:28:23 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTransfer Create (0.6ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:28:23.338492"], ["updated_at", "2021-09-05 21:28:23.338492"]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 2.1ms | Allocations: 1689)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/services/transfer_creator.rb:19:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:28:30 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:28:30.281014"], ["updated_at", "2021-09-05 21:28:30.281014"]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
  [1m[36mAccount Load (0.5ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
  [1m[36mTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
Completed 201 Created in 23ms (Views: 0.3ms | ActiveRecord: 1.8ms | Allocations: 20912)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:28:43 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:28:43.642946"], ["updated_at", "2021-09-05 21:28:43.642946"]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
  [1m[36mTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
Completed 201 Created in 24ms (Views: 0.4ms | ActiveRecord: 1.6ms | Allocations: 20882)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:29:10 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTransfer Load (0.1ms)[0m  [1m[34mSELECT "transfers".* FROM "transfers" /* loading for inspect */ LIMIT ?[0m  [["LIMIT", 11]]
Completed 500 Internal Server Error in 11ms (Allocations: 7504)


  [1m[36mCACHE Transfer Load (0.0ms)[0m  [1m[34mSELECT "transfers".* FROM "transfers" /* loading for inspect */ LIMIT ?[0m  [["LIMIT", 11]]
  
NoMethodError (undefined method `to_model' for #<ActiveRecord::Relation [#<Transfer id: 1, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 21:16:58.736747000 +0000", updated_at: "2021-09-05 21:16:58.736747000 +0000">, #<Transfer id: 2, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 21:17:46.079791000 +0000", updated_at: "2021-09-05 21:17:46.079791000 +0000">, #<Transfer id: 3, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 21:20:53.225117000 +0000", updated_at: "2021-09-05 21:20:53.225117000 +0000">, #<Transfer id: 4, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 21:21:03.253425000 +0000", updated_at: "2021-09-05 21:21:03.253425000 +0000">, #<Transfer id: 5, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 21:28:00.998473000 +0000", updated_at: "2021-09-05 21:28:00.998473000 +0000">, #<Transfer id: 6, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 21:28:23.338492000 +0000", updated_at: "2021-09-05 21:28:23.338492000 +0000">, #<Transfer id: 7, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 21:28:30.281014000 +0000", updated_at: "2021-09-05 21:28:30.281014000 +0000">, #<Transfer id: 8, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 21:28:43.642946000 +0000", updated_at: "2021-09-05 21:28:43.642946000 +0000">]>
Did you mean?  to_xml):
  
app/controllers/transfers_controller.rb:13:in `create'
  [1m[36mCACHE Transfer Load (0.0ms)[0m  [1m[34mSELECT "transfers".* FROM "transfers" /* loading for inspect */ LIMIT ?[0m  [["LIMIT", 11]]
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:29:43 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTransaction Load (0.1ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" /* loading for inspect */ LIMIT ?[0m  [["LIMIT", 11]]
Completed 500 Internal Server Error in 6ms (Allocations: 4445)


  [1m[36mCACHE Transaction Load (0.0ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" /* loading for inspect */ LIMIT ?[0m  [["LIMIT", 11]]
  
NoMethodError (undefined method `to_model' for #<ActiveRecord::Relation []>
Did you mean?  to_xml):
  
app/controllers/transfers_controller.rb:13:in `create'
  [1m[36mCACHE Transaction Load (0.0ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" /* loading for inspect */ LIMIT ?[0m  [["LIMIT", 11]]
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:30:21 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.7ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:30:21.896914"], ["updated_at", "2021-09-05 21:30:21.896914"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mCACHE Transaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 201 Created in 19ms (Views: 0.5ms | ActiveRecord: 1.8ms | Allocations: 18361)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:30:52 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.8ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:30:52.159083"], ["updated_at", "2021-09-05 21:30:52.159083"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mCACHE Transaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 30ms (ActiveRecord: 2.2ms | Allocations: 19079)


  
NoMethodError (undefined method `to_model' for 1:Integer
Did you mean?  to_yaml):
  
app/controllers/transfers_controller.rb:13:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:31:23 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.6ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:31:23.720832"], ["updated_at", "2021-09-05 21:31:23.720832"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mCACHE Transaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 201 Created in 21ms (Views: 0.1ms | ActiveRecord: 1.9ms | Allocations: 18183)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:31:44 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.5ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:31:44.851726"], ["updated_at", "2021-09-05 21:31:44.851726"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mCACHE Transaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTransaction Load (0.1ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  ↳ app/controllers/transfers_controller.rb:13:in `create'
Completed 201 Created in 18ms (Views: 0.4ms | ActiveRecord: 1.9ms | Allocations: 18628)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:35:13 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.7ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:35:13.852638"], ["updated_at", "2021-09-05 21:35:13.852638"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mCACHE Transaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTransfer Load (0.1ms)[0m  [1m[34mSELECT "transfers".* FROM "transfers"[0m
  ↳ app/controllers/transfers_controller.rb:13:in `create'
Completed 201 Created in 23ms (Views: 3.6ms | ActiveRecord: 2.0ms | Allocations: 20220)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:37:34 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.7ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:37:34.384794"], ["updated_at", "2021-09-05 21:37:34.384794"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mCACHE Transaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 201 Created in 28ms (Views: 0.1ms | ActiveRecord: 2.2ms | Allocations: 18187)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:37:49 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (1.4ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:37:49.645263"], ["updated_at", "2021-09-05 21:37:49.645263"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mCACHE Transaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTransaction Load (0.1ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions"[0m
  ↳ app/controllers/transfers_controller.rb:13:in `create'
Completed 201 Created in 41ms (Views: 0.4ms | ActiveRecord: 4.0ms | Allocations: 18635)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:38:08 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:38:08.628787"], ["updated_at", "2021-09-05 21:38:08.628787"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mCACHE Transaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "transactions" WHERE "transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 201 Created in 19ms (Views: 0.2ms | ActiveRecord: 1.4ms | Allocations: 18197)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:38:52 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:38:52.814896"], ["updated_at", "2021-09-05 21:38:52.814896"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 1.6ms | Allocations: 7155)


  
NameError (uninitialized constant TransferCreator::AccountTransaction
Did you mean?  AccountsController):
  
app/services/transfer_creator.rb:16:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:39:27 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:39:27.676913"], ["updated_at", "2021-09-05 21:39:27.676913"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.7ms | Allocations: 6515)


  
ActiveRecord::StatementInvalid (Could not find table 'account_transactions'):
  
app/services/transfer_creator.rb:16:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateAccountTransactions (20210905214316)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transaction_id" varchar, "account_id" integer NOT NULL, "amount" decimal, "transaction_type" varchar, "description" varchar, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_41a54502a9"
FOREIGN KEY ("transfer_id")
  REFERENCES "transfers" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905214316"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:43:52 +0200
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.3ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:43:53.082171"], ["updated_at", "2021-09-05 21:43:53.082171"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 62ms (ActiveRecord: 1.3ms | Allocations: 26813)


  
NoMethodError (undefined method `transaction_number' for #<AccountTransaction id: nil, transaction_id: nil, account_id: 1, amount: 0.5e3, transaction_type: "deposit", description: nil, transfer_id: 1, created_at: nil, updated_at: nil>
Did you mean?  transaction_type
               transaction_type?
               transaction_type=):
  
app/services/transfer_creator.rb:16:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateClients (20210905191045)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "clients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "phone_number" varchar, "address" varchar, "city" varchar, "country" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191045"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateAccounts (20210905191051)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "client_id" integer NOT NULL, "account_number" varchar, "balance" decimal, "currency" varchar, "status" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_65d703860a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191051"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateTransfers (20210905191738)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transferor_id" integer, "transferee_id" integer, "execution_date" date, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_22584f0037"
FOREIGN KEY ("transferor_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_84ddda26f0"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191738"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateAccountTransactions (20210905214316)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transaction_number" varchar, "account_id" integer NOT NULL, "amount" decimal, "transaction_type" varchar, "description" varchar, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_41a54502a9"
FOREIGN KEY ("transfer_id")
  REFERENCES "transfers" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905214316"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-09-05 21:45:11.872166"], ["updated_at", "2021-09-05 21:45:11.872166"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:45:28 +0200
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.1ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:45:28.242404"], ["updated_at", "2021-09-05 21:45:28.242404"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.3ms | Allocations: 9077)


  
ActiveRecord::InvalidForeignKey (SQLite3::ConstraintException: FOREIGN KEY constraint failed):
  
app/services/transfer_creator.rb:11:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "MENTOR"], ["last_name", "NILA"], ["phone_number", "38649841109"], ["created_at", "2021-09-05 21:45:37.102117"], ["updated_at", "2021-09-05 21:45:37.102117"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.1ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "JON"], ["last_name", "NILA"], ["phone_number", "38649841110"], ["created_at", "2021-09-05 21:45:37.103864"], ["updated_at", "2021-09-05 21:45:37.103864"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "d5a21c5d-d89c-46af-8dd5-9d9da7bead70"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 1], ["account_number", "d5a21c5d-d89c-46af-8dd5-9d9da7bead70"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 21:45:37.110959"], ["updated_at", "2021-09-05 21:45:37.110959"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "6a5a8e16-70e7-4da1-8389-075dc13954e2"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 2], ["account_number", "6a5a8e16-70e7-4da1-8389-075dc13954e2"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 21:45:37.113532"], ["updated_at", "2021-09-05 21:45:37.113532"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:45:39 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.6ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:45:39.194895"], ["updated_at", "2021-09-05 21:45:39.194895"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mCACHE AccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 201 Created in 31ms (Views: 0.6ms | ActiveRecord: 1.9ms | Allocations: 17102)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:46:05 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:46:05.428183"], ["updated_at", "2021-09-05 21:46:05.428183"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mCACHE AccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 23ms (ActiveRecord: 1.6ms | Allocations: 19843)


  
NameError (uninitialized constant TransfersController::Transaction
Did you mean?  TracePoint):
  
app/controllers/transfers_controller.rb:13:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:46:16 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:46:16.483681"], ["updated_at", "2021-09-05 21:46:16.483681"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mCACHE AccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccountTransaction Load (0.2ms)[0m  [1m[34mSELECT "account_transactions".* FROM "account_transactions"[0m
  ↳ app/controllers/transfers_controller.rb:13:in `create'
Completed 201 Created in 20ms (Views: 0.4ms | ActiveRecord: 1.9ms | Allocations: 18725)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:46:50 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (1.7ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:46:50.447223"], ["updated_at", "2021-09-05 21:46:50.447223"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mCACHE AccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 201 Created in 19ms (Views: 0.2ms | ActiveRecord: 2.8ms | Allocations: 18174)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:48:29 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:48:29.973381"], ["updated_at", "2021-09-05 21:48:29.973381"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500.0], ["transaction_type", "deposit"], ["transfer_id", 1], ["created_at", "2021-09-05 21:48:29.983094"], ["updated_at", "2021-09-05 21:48:29.983094"]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 500.0], ["transaction_type", "withdraw"], ["transfer_id", 1], ["created_at", "2021-09-05 21:48:29.984265"], ["updated_at", "2021-09-05 21:48:29.984265"]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 201 Created in 16ms (Views: 0.2ms | ActiveRecord: 1.4ms | Allocations: 17645)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:48:43 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (12.5ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:48:43.574308"], ["updated_at", "2021-09-05 21:48:43.574308"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500.0], ["transaction_type", "deposit"], ["transfer_id", 1], ["created_at", "2021-09-05 21:48:43.612851"], ["updated_at", "2021-09-05 21:48:43.612851"]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 500.0], ["transaction_type", "withdraw"], ["transfer_id", 1], ["created_at", "2021-09-05 21:48:43.614166"], ["updated_at", "2021-09-05 21:48:43.614166"]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 201 Created in 50ms (Views: 0.3ms | ActiveRecord: 13.9ms | Allocations: 17762)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:48:54 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.3ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:48:54.742845"], ["updated_at", "2021-09-05 21:48:54.742845"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500.0], ["transaction_type", "deposit"], ["transfer_id", 1], ["created_at", "2021-09-05 21:48:54.752614"], ["updated_at", "2021-09-05 21:48:54.752614"]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 500.0], ["transaction_type", "withdraw"], ["transfer_id", 1], ["created_at", "2021-09-05 21:48:54.753866"], ["updated_at", "2021-09-05 21:48:54.753866"]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 201 Created in 17ms (Views: 0.3ms | ActiveRecord: 1.4ms | Allocations: 17949)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:49:00 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:49:00.218514"], ["updated_at", "2021-09-05 21:49:00.218514"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500.0], ["transaction_type", "deposit"], ["transfer_id", 1], ["created_at", "2021-09-05 21:49:00.230295"], ["updated_at", "2021-09-05 21:49:00.230295"]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 500.0], ["transaction_type", "withdraw"], ["transfer_id", 1], ["created_at", "2021-09-05 21:49:00.232188"], ["updated_at", "2021-09-05 21:49:00.232188"]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 201 Created in 20ms (Views: 0.3ms | ActiveRecord: 1.6ms | Allocations: 18022)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:49:06 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.3ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:49:06.373614"], ["updated_at", "2021-09-05 21:49:06.373614"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500.0], ["transaction_type", "deposit"], ["transfer_id", 1], ["created_at", "2021-09-05 21:49:06.385383"], ["updated_at", "2021-09-05 21:49:06.385383"]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 500.0], ["transaction_type", "withdraw"], ["transfer_id", 1], ["created_at", "2021-09-05 21:49:06.387155"], ["updated_at", "2021-09-05 21:49:06.387155"]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 201 Created in 21ms (Views: 0.2ms | ActiveRecord: 1.5ms | Allocations: 18173)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:49:09 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:49:09.347365"], ["updated_at", "2021-09-05 21:49:09.347365"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mCACHE AccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 201 Created in 18ms (Views: 0.3ms | ActiveRecord: 1.3ms | Allocations: 18212)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:49:51 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:49:51.676651"], ["updated_at", "2021-09-05 21:49:51.676651"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 16ms (ActiveRecord: 1.6ms | Allocations: 14087)


  
NameError (undefined local variable or method `slef' for #<AccountTransaction id: nil, transaction_number: nil, account_id: 1, amount: 0.5e3, transaction_type: "deposit", description: nil, transfer_id: 1, created_at: nil, updated_at: nil>
Did you mean?  self):
  
app/models/account_transaction.rb:15:in `load_defaults'
app/services/transfer_creator.rb:16:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:50:01 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:50:01.458502"], ["updated_at", "2021-09-05 21:50:01.458502"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "04755a0d-304a-46e6-8cea-729f6cd222b1"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "04755a0d-304a-46e6-8cea-729f6cd222b1"], ["account_id", 1], ["amount", 500.0], ["transaction_type", "deposit"], ["transfer_id", 1], ["created_at", "2021-09-05 21:50:01.469133"], ["updated_at", "2021-09-05 21:50:01.469133"]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "209967e5-38e0-42a4-85b4-d087b83b20b1"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "209967e5-38e0-42a4-85b4-d087b83b20b1"], ["account_id", 2], ["amount", 500.0], ["transaction_type", "withdraw"], ["transfer_id", 1], ["created_at", "2021-09-05 21:50:01.470986"], ["updated_at", "2021-09-05 21:50:01.470986"]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 201 Created in 18ms (Views: 0.2ms | ActiveRecord: 1.4ms | Allocations: 19827)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:52:30 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.8ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:52:30.668443"], ["updated_at", "2021-09-05 21:52:30.668443"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "65d2e610-6b45-4987-99dc-171657d69612"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.3ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "65d2e610-6b45-4987-99dc-171657d69612"], ["account_id", 1], ["amount", 500.0], ["transaction_type", "deposit"], ["transfer_id", 1], ["created_at", "2021-09-05 21:52:30.675061"], ["updated_at", "2021-09-05 21:52:30.675061"]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "b40150fc-aeb3-4f24-85de-e115bd7535ef"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "b40150fc-aeb3-4f24-85de-e115bd7535ef"], ["account_id", 2], ["amount", 500.0], ["transaction_type", "withdraw"], ["transfer_id", 1], ["created_at", "2021-09-05 21:52:30.680424"], ["updated_at", "2021-09-05 21:52:30.680424"]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 201 Created in 17ms (Views: 0.5ms | ActiveRecord: 2.4ms | Allocations: 6014)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:52:39 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.5ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:52:39.705704"], ["updated_at", "2021-09-05 21:52:39.705704"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "3684d594-7f54-4fe5-9009-44531abb5e83"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.3ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "3684d594-7f54-4fe5-9009-44531abb5e83"], ["account_id", 1], ["amount", 500.0], ["transaction_type", "deposit"], ["transfer_id", 1], ["created_at", "2021-09-05 21:52:39.711946"], ["updated_at", "2021-09-05 21:52:39.711946"]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "06310dd7-f2fd-477e-9d0d-db0f80b066cf"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "06310dd7-f2fd-477e-9d0d-db0f80b066cf"], ["account_id", 2], ["amount", 500.0], ["transaction_type", "withdraw"], ["transfer_id", 1], ["created_at", "2021-09-05 21:52:39.716695"], ["updated_at", "2021-09-05 21:52:39.716695"]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 201 Created in 18ms (Views: 0.5ms | ActiveRecord: 3.8ms | Allocations: 6012)


Started POST "/transfers" for 127.0.0.1 at 2021-09-05 23:52:44 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 21:52:44.473533"], ["updated_at", "2021-09-05 21:52:44.473533"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 11ms (ActiveRecord: 1.0ms | Allocations: 7613)


  
NoMethodError (undefined method `id' for [#<Transfer id: nil, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 21:52:44.473533000 +0000", updated_at: "2021-09-05 21:52:44.473533000 +0000">]:Array):
  
app/services/transfer_creator.rb:20:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateClients (20210905191045)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "clients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "phone_number" varchar, "address" varchar, "city" varchar, "country" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191045"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateAccounts (20210905191051)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "client_id" integer NOT NULL, "account_number" varchar, "balance" decimal, "currency" varchar, "status" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_65d703860a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191051"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateTransfers (20210905191738)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transferor_id" integer, "transferee_id" integer, "execution_date" date, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_22584f0037"
FOREIGN KEY ("transferor_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191738"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateAccountTransactions (20210905214316)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transaction_number" varchar, "account_id" integer NOT NULL, "amount" decimal, "transaction_type" varchar, "description" varchar, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_41a54502a9"
FOREIGN KEY ("transfer_id")
  REFERENCES "transfers" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905214316"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-09-05 22:03:47.598837"], ["updated_at", "2021-09-05 22:03:47.598837"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "MENTOR"], ["last_name", "NILA"], ["phone_number", "38649841109"], ["created_at", "2021-09-05 22:03:51.405016"], ["updated_at", "2021-09-05 22:03:51.405016"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.1ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "JON"], ["last_name", "NILA"], ["phone_number", "38649841110"], ["created_at", "2021-09-05 22:03:51.406775"], ["updated_at", "2021-09-05 22:03:51.406775"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "da0204d9-6aa1-4637-815d-4d3d6eca14b1"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 1], ["account_number", "da0204d9-6aa1-4637-815d-4d3d6eca14b1"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 22:03:51.413930"], ["updated_at", "2021-09-05 22:03:51.413930"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "8587cc79-c07e-439f-b84e-98daa8cba4ab"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 2], ["account_number", "8587cc79-c07e-439f-b84e-98daa8cba4ab"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 22:03:51.416691"], ["updated_at", "2021-09-05 22:03:51.416691"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:04:04 +0200
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms | Allocations: 3312)


  
ActiveModel::UnknownAttributeError (unknown attribute 'transferee_id' for Transfer.):
  
app/services/transfer_creator.rb:11:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "account_transactions"[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transaction_number" varchar, "account_id" integer NOT NULL, "amount" decimal, "transaction_type" varchar, "description" varchar, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "client_id" integer NOT NULL, "account_number" varchar, "balance" decimal, "currency" varchar, "status" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "clients"[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "clients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "phone_number" varchar, "address" varchar, "city" varchar, "country" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "transfers"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transferor_id" integer, "transferee_id" integer, "execution_date" date, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_41a54502a9"
FOREIGN KEY ("transfer_id")
  REFERENCES "transfers" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccounts_on_client_id" ON "aaccounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "accounts"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "accounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_65d703860a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "accounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "aaccounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (3.9ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_22584f0037"
FOREIGN KEY ("transferor_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20210905214316)[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20210905191045),
(20210905191051),
(20210905191738);

[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-09-05 22:05:26.544203"], ["updated_at", "2021-09-05 22:05:26.544203"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "schema_sha1"], ["value", "b2555306ca607caae1c4f678b8cd977d742f9c8b"], ["created_at", "2021-09-05 22:05:26.547366"], ["updated_at", "2021-09-05 22:05:26.547366"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "account_transactions"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transaction_number" varchar, "account_id" integer NOT NULL, "amount" decimal, "transaction_type" varchar, "description" varchar, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "client_id" integer NOT NULL, "account_number" varchar, "balance" decimal, "currency" varchar, "status" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "clients"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "clients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "phone_number" varchar, "address" varchar, "city" varchar, "country" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "transfers"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transferor_id" integer, "transferee_id" integer, "execution_date" date, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_41a54502a9"
FOREIGN KEY ("transfer_id")
  REFERENCES "transfers" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccounts_on_client_id" ON "aaccounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "accounts"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "accounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_65d703860a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "accounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "aaccounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_22584f0037"
FOREIGN KEY ("transferor_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20210905214316)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20210905191045),
(20210905191051),
(20210905191738);

[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-09-05 22:05:26.599916"], ["updated_at", "2021-09-05 22:05:26.599916"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.1ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = ?, "updated_at" = ? WHERE "ar_internal_metadata"."key" = ?[0m  [["value", "test"], ["updated_at", "2021-09-05 22:05:26.602765"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "schema_sha1"], ["value", "b2555306ca607caae1c4f678b8cd977d742f9c8b"], ["created_at", "2021-09-05 22:05:26.605775"], ["updated_at", "2021-09-05 22:05:26.605775"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "MENTOR"], ["last_name", "NILA"], ["phone_number", "38649841109"], ["created_at", "2021-09-05 22:05:26.620431"], ["updated_at", "2021-09-05 22:05:26.620431"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "JON"], ["last_name", "NILA"], ["phone_number", "38649841110"], ["created_at", "2021-09-05 22:05:26.622940"], ["updated_at", "2021-09-05 22:05:26.622940"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "83ce9016-9dd8-49bb-98b4-adefde2e64d4"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 1], ["account_number", "83ce9016-9dd8-49bb-98b4-adefde2e64d4"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 22:05:26.633711"], ["updated_at", "2021-09-05 22:05:26.633711"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "33749146-1c5e-4864-8a69-4bc2a3adf260"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 2], ["account_number", "33749146-1c5e-4864-8a69-4bc2a3adf260"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 22:05:26.637104"], ["updated_at", "2021-09-05 22:05:26.637104"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateClients (20210905191045)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "clients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "phone_number" varchar, "address" varchar, "city" varchar, "country" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191045"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateAccounts (20210905191051)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "client_id" integer NOT NULL, "account_number" varchar, "balance" decimal, "currency" varchar, "status" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_65d703860a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191051"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateTransfers (20210905191738)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transferor_id" integer, "transferee_id" integer, "execution_date" date, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_22584f0037"
FOREIGN KEY ("transferor_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191738"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateAccountTransactions (20210905214316)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transaction_number" varchar, "account_id" integer NOT NULL, "amount" decimal, "transaction_type" varchar, "description" varchar, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_41a54502a9"
FOREIGN KEY ("transfer_id")
  REFERENCES "transfers" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905214316"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-09-05 22:05:59.224913"], ["updated_at", "2021-09-05 22:05:59.224913"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.4ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "MENTOR"], ["last_name", "NILA"], ["phone_number", "38649841109"], ["created_at", "2021-09-05 22:06:02.056270"], ["updated_at", "2021-09-05 22:06:02.056270"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.1ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "JON"], ["last_name", "NILA"], ["phone_number", "38649841110"], ["created_at", "2021-09-05 22:06:02.058406"], ["updated_at", "2021-09-05 22:06:02.058406"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "e45e4a50-2bc2-4acb-b0a5-e62c78ccda6e"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 1], ["account_number", "e45e4a50-2bc2-4acb-b0a5-e62c78ccda6e"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 22:06:02.067335"], ["updated_at", "2021-09-05 22:06:02.067335"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "94739986-40e1-4a4a-a9ff-b2b6f5a2273e"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 2], ["account_number", "94739986-40e1-4a4a-a9ff-b2b6f5a2273e"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 22:06:02.070186"], ["updated_at", "2021-09-05 22:06:02.070186"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:06:06 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:06:06.975009"], ["updated_at", "2021-09-05 22:06:06.975009"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 16ms (ActiveRecord: 2.6ms | Allocations: 7614)


  
NoMethodError (undefined method `id' for [#<Transfer id: nil, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 22:06:06.975009000 +0000", updated_at: "2021-09-05 22:06:06.975009000 +0000">]:Array):
  
app/services/transfer_creator.rb:20:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:06:25 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.3ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:06:25.750432"], ["updated_at", "2021-09-05 22:06:25.750432"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "77cedef8-3d47-43a3-9084-51f27d3c1af5"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "77cedef8-3d47-43a3-9084-51f27d3c1af5"], ["account_id", 1], ["amount", 500.0], ["transaction_type", "deposit"], ["created_at", "2021-09-05 22:06:25.821417"], ["updated_at", "2021-09-05 22:06:25.821417"]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 117ms (ActiveRecord: 1.4ms | Allocations: 19216)


  
ActiveRecord::NotNullViolation (SQLite3::ConstraintException: NOT NULL constraint failed: account_transactions.transfer_id):
  
app/services/transfer_creator.rb:16:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:07:33 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.3ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:07:33.710295"], ["updated_at", "2021-09-05 22:07:33.710295"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "cb011dd5-4abf-4fcd-a681-88789d4397c4"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "cb011dd5-4abf-4fcd-a681-88789d4397c4"], ["account_id", 1], ["amount", 500.0], ["transaction_type", "deposit"], ["created_at", "2021-09-05 22:07:33.722645"], ["updated_at", "2021-09-05 22:07:33.722645"]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 19ms (ActiveRecord: 1.3ms | Allocations: 17543)


  
ActiveRecord::NotNullViolation (SQLite3::ConstraintException: NOT NULL constraint failed: account_transactions.transfer_id):
  
app/services/transfer_creator.rb:16:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:07:46 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:07:46.842949"], ["updated_at", "2021-09-05 22:07:46.842949"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.6ms | Allocations: 7656)


  
NoMethodError (undefined method `id' for [#<Transfer id: nil, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 22:07:46.842949000 +0000", updated_at: "2021-09-05 22:07:46.842949000 +0000">]:Array):
  
app/services/transfer_creator.rb:20:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:09:05 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.3ms | Allocations: 4834)


  
ArgumentError (When assigning attributes, you must pass a hash as an argument, Array passed.):
  
app/services/transfer_creator.rb:11:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:09:24 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:09:24.322560"], ["updated_at", "2021-09-05 22:09:24.322560"]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:17:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "6b47dfdc-b121-4e35-8741-660ec7d7d493"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:17:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "6b47dfdc-b121-4e35-8741-660ec7d7d493"], ["account_id", 1], ["amount", 500.0], ["transaction_type", "deposit"], ["transfer_id", 1], ["created_at", "2021-09-05 22:09:24.335729"], ["updated_at", "2021-09-05 22:09:24.335729"]]
  ↳ app/services/transfer_creator.rb:17:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "16ea31bd-8697-4807-848d-88ba832b240b"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "16ea31bd-8697-4807-848d-88ba832b240b"], ["account_id", 2], ["amount", 500.0], ["transaction_type", "withdraw"], ["transfer_id", 1], ["created_at", "2021-09-05 22:09:24.337504"], ["updated_at", "2021-09-05 22:09:24.337504"]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:29:in `block in send_funds'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 23ms (ActiveRecord: 1.5ms | Allocations: 21288)


  
NameError (undefined local variable or method `amount' for #<TransferCreator:0x0000000107ea90e0 @transferor_id="1", @transferee_id="2", @amount="500", @execution_date="2021-09-01", @transfer=#<Transfer id: nil, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 22:09:24.322560000 +0000", updated_at: "2021-09-05 22:09:24.322560000 +0000">>
Did you mean?  @amount):
  
app/services/transfer_creator.rb:30:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:10:16 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:10:17.042221"], ["updated_at", "2021-09-05 22:10:17.042221"]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:17:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "62dd9be9-54d9-4ba7-bb4c-b49ca710a161"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:17:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "62dd9be9-54d9-4ba7-bb4c-b49ca710a161"], ["account_id", 1], ["amount", 500.0], ["transaction_type", "deposit"], ["transfer_id", 1], ["created_at", "2021-09-05 22:10:17.054502"], ["updated_at", "2021-09-05 22:10:17.054502"]]
  ↳ app/services/transfer_creator.rb:17:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "2999b74d-d355-4a4b-aedd-c63a301a916c"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "2999b74d-d355-4a4b-aedd-c63a301a916c"], ["account_id", 2], ["amount", 500.0], ["transaction_type", "withdraw"], ["transfer_id", 1], ["created_at", "2021-09-05 22:10:17.057248"], ["updated_at", "2021-09-05 22:10:17.057248"]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:29:in `block in send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 23ms (ActiveRecord: 1.4ms | Allocations: 21327)


  
NameError (undefined local variable or method `amount' for #<TransferCreator:0x0000000107d25b10 @transferor_id="1", @transferee_id="2", @amount="500", @execution_date="2021-09-01", @transfer=#<Transfer id: nil, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 22:10:17.042221000 +0000", updated_at: "2021-09-05 22:10:17.042221000 +0000">>
Did you mean?  @amount):
  
app/services/transfer_creator.rb:30:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:10:37 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:10:37.309103"], ["updated_at", "2021-09-05 22:10:37.309103"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.9ms | Allocations: 7618)


  
NoMethodError (undefined method `id' for [#<Transfer id: nil, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 22:10:37.309103000 +0000", updated_at: "2021-09-05 22:10:37.309103000 +0000">]:Array):
  
app/services/transfer_creator.rb:20:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:17:28 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.9ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:17:28.462448"], ["updated_at", "2021-09-05 22:17:28.462448"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "90642af7-2119-4085-b14c-6ff1354486c8"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "90642af7-2119-4085-b14c-6ff1354486c8"], ["account_id", 2], ["amount", 500.0], ["transaction_type", "deposit"], ["transfer_id", 1], ["created_at", "2021-09-05 22:17:28.490974"], ["updated_at", "2021-09-05 22:17:28.490974"]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "6a23a60b-a37b-4320-8088-0d60bf87ccb1"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "6a23a60b-a37b-4320-8088-0d60bf87ccb1"], ["account_id", 1], ["amount", 500.0], ["transaction_type", "withdraw"], ["transfer_id", 1], ["created_at", "2021-09-05 22:17:28.494203"], ["updated_at", "2021-09-05 22:17:28.494203"]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:28:in `block in send_funds'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 41ms (ActiveRecord: 2.0ms | Allocations: 20987)


  
NameError (undefined local variable or method `amount' for #<TransferCreator:0x000000010b0c1848 @transferor_id="1", @transferee_id="2", @amount="500", @execution_date="2021-09-01", @transfer=[#<Transfer id: nil, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 22:17:28.462448000 +0000", updated_at: "2021-09-05 22:17:28.462448000 +0000">]>
Did you mean?  @amount):
  
app/services/transfer_creator.rb:29:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:17:53 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:17:53.420084"], ["updated_at", "2021-09-05 22:17:53.420084"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "bfbfb2b6-5c19-4f4e-bac6-0d56f7dcdf2c"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "bfbfb2b6-5c19-4f4e-bac6-0d56f7dcdf2c"], ["account_id", 2], ["amount", 500.0], ["transaction_type", "deposit"], ["transfer_id", 1], ["created_at", "2021-09-05 22:17:53.431880"], ["updated_at", "2021-09-05 22:17:53.431880"]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "3287160a-63bb-47b3-8f82-4e8ab9a233ec"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "3287160a-63bb-47b3-8f82-4e8ab9a233ec"], ["account_id", 1], ["amount", 500.0], ["transaction_type", "withdraw"], ["transfer_id", 1], ["created_at", "2021-09-05 22:17:53.434186"], ["updated_at", "2021-09-05 22:17:53.434186"]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:28:in `block in send_funds'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 24ms (ActiveRecord: 1.7ms | Allocations: 23174)


  
TypeError (String can't be coerced into BigDecimal):
  
app/services/transfer_creator.rb:29:in `-'
app/services/transfer_creator.rb:29:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:18:36 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.4ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:18:36.625702"], ["updated_at", "2021-09-05 22:18:36.625702"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "1cc3e7e9-e94a-47ee-9e77-7a6a9bd2533f"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "1cc3e7e9-e94a-47ee-9e77-7a6a9bd2533f"], ["account_id", 2], ["amount", 500.0], ["transaction_type", "deposit"], ["transfer_id", 1], ["created_at", "2021-09-05 22:18:36.648876"], ["updated_at", "2021-09-05 22:18:36.648876"]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "e9eccbb2-1d20-4580-ace6-e7487889cc63"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "e9eccbb2-1d20-4580-ace6-e7487889cc63"], ["account_id", 1], ["amount", 500.0], ["transaction_type", "withdraw"], ["transfer_id", 1], ["created_at", "2021-09-05 22:18:36.995989"], ["updated_at", "2021-09-05 22:18:36.995989"]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:28:in `block in send_funds'
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:30:in `block in send_funds'
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? AND "accounts"."id" != ? LIMIT ?[0m  [["account_number", "94739986-40e1-4a4a-a9ff-b2b6f5a2273e"], ["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:30:in `block in send_funds'
  [1m[36mAccount Update (0.1ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = ?, "updated_at" = ? WHERE "accounts"."id" = ?[0m  [["balance", -500.0], ["updated_at", "2021-09-05 22:18:37.046859"], ["id", 2]]
  ↳ app/services/transfer_creator.rb:30:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:31:in `block in send_funds'
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:33:in `block in send_funds'
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? AND "accounts"."id" != ? LIMIT ?[0m  [["account_number", "e45e4a50-2bc2-4acb-b0a5-e62c78ccda6e"], ["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:33:in `block in send_funds'
  [1m[36mAccount Update (0.1ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = ?, "updated_at" = ? WHERE "accounts"."id" = ?[0m  [["balance", 500.0], ["updated_at", "2021-09-05 22:18:37.049329"], ["id", 1]]
  ↳ app/services/transfer_creator.rb:33:in `block in send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 201 Created in 461ms (Views: 0.1ms | ActiveRecord: 6.1ms | Allocations: 34283)


  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "account_transactions"[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transaction_number" varchar, "account_id" integer NOT NULL, "amount" decimal, "transaction_type" varchar, "description" varchar, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "client_id" integer NOT NULL, "account_number" varchar, "balance" decimal, "currency" varchar, "status" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "clients"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "clients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "phone_number" varchar, "address" varchar, "city" varchar, "country" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "transfers"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transferor_id" integer, "transferee_id" integer, "execution_date" date, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_41a54502a9"
FOREIGN KEY ("transfer_id")
  REFERENCES "transfers" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccounts_on_client_id" ON "aaccounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "accounts"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "accounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_65d703860a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "accounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "aaccounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_22584f0037"
FOREIGN KEY ("transferor_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20210905214316)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20210905191045),
(20210905191051),
(20210905191738);

[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-09-05 22:19:21.785993"], ["updated_at", "2021-09-05 22:19:21.785993"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "schema_sha1"], ["value", "b2555306ca607caae1c4f678b8cd977d742f9c8b"], ["created_at", "2021-09-05 22:19:21.789712"], ["updated_at", "2021-09-05 22:19:21.789712"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "account_transactions"[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transaction_number" varchar, "account_id" integer NOT NULL, "amount" decimal, "transaction_type" varchar, "description" varchar, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts"[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "client_id" integer NOT NULL, "account_number" varchar, "balance" decimal, "currency" varchar, "status" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "clients"[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "clients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "phone_number" varchar, "address" varchar, "city" varchar, "country" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "transfers"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transferor_id" integer, "transferee_id" integer, "execution_date" date, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_41a54502a9"
FOREIGN KEY ("transfer_id")
  REFERENCES "transfers" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccounts_on_client_id" ON "aaccounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "accounts"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "accounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_65d703860a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "accounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "aaccounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_22584f0037"
FOREIGN KEY ("transferor_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20210905214316)[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20210905191045),
(20210905191051),
(20210905191738);

[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-09-05 22:19:21.852820"], ["updated_at", "2021-09-05 22:19:21.852820"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.1ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = ?, "updated_at" = ? WHERE "ar_internal_metadata"."key" = ?[0m  [["value", "test"], ["updated_at", "2021-09-05 22:19:21.855436"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "schema_sha1"], ["value", "b2555306ca607caae1c4f678b8cd977d742f9c8b"], ["created_at", "2021-09-05 22:19:21.857995"], ["updated_at", "2021-09-05 22:19:21.857995"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.3ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "MENTOR"], ["last_name", "NILA"], ["phone_number", "38649841109"], ["created_at", "2021-09-05 22:19:21.872404"], ["updated_at", "2021-09-05 22:19:21.872404"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.1ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "JON"], ["last_name", "NILA"], ["phone_number", "38649841110"], ["created_at", "2021-09-05 22:19:21.874419"], ["updated_at", "2021-09-05 22:19:21.874419"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "3fa569d3-aa33-46cf-a1e3-9da4012d2129"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 1], ["account_number", "3fa569d3-aa33-46cf-a1e3-9da4012d2129"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 22:19:21.884761"], ["updated_at", "2021-09-05 22:19:21.884761"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "ba5d4cc3-e581-416c-af48-60546d2c2f25"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 2], ["account_number", "ba5d4cc3-e581-416c-af48-60546d2c2f25"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 22:19:21.888771"], ["updated_at", "2021-09-05 22:19:21.888771"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.7ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "MENTOR"], ["last_name", "NILA"], ["phone_number", "38649841109"], ["created_at", "2021-09-05 22:19:39.919213"], ["updated_at", "2021-09-05 22:19:39.919213"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.1ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "JON"], ["last_name", "NILA"], ["phone_number", "38649841110"], ["created_at", "2021-09-05 22:19:39.921773"], ["updated_at", "2021-09-05 22:19:39.921773"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "749cf036-d705-4e48-9dec-cb3cf815390c"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 1], ["account_number", "749cf036-d705-4e48-9dec-cb3cf815390c"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 22:19:39.932462"], ["updated_at", "2021-09-05 22:19:39.932462"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "a93868db-32b7-4497-841b-5382e6ef891e"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 2], ["account_number", "a93868db-32b7-4497-841b-5382e6ef891e"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 22:19:39.935725"], ["updated_at", "2021-09-05 22:19:39.935725"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:20:10 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.8ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:20:10.173336"], ["updated_at", "2021-09-05 22:20:10.173336"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "48553ad2-010d-4079-b755-f94e288b438d"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "48553ad2-010d-4079-b755-f94e288b438d"], ["account_id", 2], ["amount", 500.0], ["transaction_type", "deposit"], ["transfer_id", 1], ["created_at", "2021-09-05 22:20:10.184793"], ["updated_at", "2021-09-05 22:20:10.184793"]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 25ms (ActiveRecord: 2.1ms | Allocations: 18754)


  
NameError (undefined local variable or method `asd' for #<TransferCreator:0x000000010a8e5ae8 @transferor_id="1", @transferee_id="2", @amount=500.0, @execution_date="2021-09-01", @transfer=[#<Transfer id: nil, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 22:20:10.173336000 +0000", updated_at: "2021-09-05 22:20:10.173336000 +0000">]>
Did you mean?  and):
  
app/services/transfer_creator.rb:22:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:20:42 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
  [1m[36mTransfer Load (0.2ms)[0m  [1m[34mSELECT "transfers".* FROM "transfers"[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.3ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:20:42.861559"], ["updated_at", "2021-09-05 22:20:42.861559"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "f34be87a-622e-4104-aba4-923b491e6ab3"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "f34be87a-622e-4104-aba4-923b491e6ab3"], ["account_id", 2], ["amount", 500.0], ["transaction_type", "deposit"], ["transfer_id", 1], ["created_at", "2021-09-05 22:20:42.872999"], ["updated_at", "2021-09-05 22:20:42.872999"]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 20ms (Views: 1.4ms | ActiveRecord: 1.5ms | Allocations: 19425)


  
NameError (undefined local variable or method `asd' for #<TransferCreator:0x000000010a8650f0 @transferor_id="1", @transferee_id="2", @amount=500.0, @execution_date="2021-09-01", @transfer=[#<Transfer id: nil, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 22:20:42.861559000 +0000", updated_at: "2021-09-05 22:20:42.861559000 +0000">]>
Did you mean?  and):
  
app/services/transfer_creator.rb:22:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:11:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:20:50 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
  [1m[36mTransfer Load (0.0ms)[0m  [1m[34mSELECT "transfers".* FROM "transfers"[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
Completed 201 Created in 2ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 1694)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:21:05 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
  [1m[36mAccountTransaction Load (0.0ms)[0m  [1m[34mSELECT "account_transactions".* FROM "account_transactions"[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
Completed 201 Created in 2ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 2362)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:21:14 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:21:14.643413"], ["updated_at", "2021-09-05 22:21:14.643413"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "ef239d4c-5d89-4072-9021-f5b38ab5d621"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "ef239d4c-5d89-4072-9021-f5b38ab5d621"], ["account_id", 2], ["amount", 500.0], ["transaction_type", "deposit"], ["transfer_id", 1], ["created_at", "2021-09-05 22:21:14.654223"], ["updated_at", "2021-09-05 22:21:14.654223"]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 16ms (ActiveRecord: 1.1ms | Allocations: 18633)


  
NameError (undefined local variable or method `asd' for #<TransferCreator:0x0000000107858b00 @transferor_id="1", @transferee_id="2", @amount=500.0, @execution_date="2021-09-01", @transfer=[#<Transfer id: nil, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 22:21:14.643413000 +0000", updated_at: "2021-09-05 22:21:14.643413000 +0000">]>
Did you mean?  and):
  
app/services/transfer_creator.rb:22:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:10:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:21:24 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:21:24.403458"], ["updated_at", "2021-09-05 22:21:24.403458"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "be348308-e8a9-46ba-81e9-af925f6a7056"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "be348308-e8a9-46ba-81e9-af925f6a7056"], ["account_id", 2], ["amount", 500.0], ["transaction_type", "deposit"], ["transfer_id", 1], ["created_at", "2021-09-05 22:21:24.413543"], ["updated_at", "2021-09-05 22:21:24.413543"]]
  ↳ app/services/transfer_creator.rb:16:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "479d0ba2-dfdc-41ea-964f-789e68f03107"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "479d0ba2-dfdc-41ea-964f-789e68f03107"], ["account_id", 1], ["amount", 500.0], ["transaction_type", "withdraw"], ["transfer_id", 1], ["created_at", "2021-09-05 22:21:24.416293"], ["updated_at", "2021-09-05 22:21:24.416293"]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:28:in `block in send_funds'
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:30:in `block in send_funds'
  [1m[36mAccount Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? AND "accounts"."id" != ? LIMIT ?[0m  [["account_number", "ba5d4cc3-e581-416c-af48-60546d2c2f25"], ["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:30:in `block in send_funds'
  [1m[36mAccount Update (0.1ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = ?, "updated_at" = ? WHERE "accounts"."id" = ?[0m  [["balance", -500.0], ["updated_at", "2021-09-05 22:21:24.423713"], ["id", 2]]
  ↳ app/services/transfer_creator.rb:30:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:31:in `block in send_funds'
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:33:in `block in send_funds'
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? AND "accounts"."id" != ? LIMIT ?[0m  [["account_number", "3fa569d3-aa33-46cf-a1e3-9da4012d2129"], ["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:33:in `block in send_funds'
  [1m[36mAccount Update (0.0ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = ?, "updated_at" = ? WHERE "accounts"."id" = ?[0m  [["balance", 500.0], ["updated_at", "2021-09-05 22:21:24.425604"], ["id", 1]]
  ↳ app/services/transfer_creator.rb:33:in `block in send_funds'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 201 Created in 29ms (Views: 0.1ms | ActiveRecord: 2.4ms | Allocations: 30365)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:25:51 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
Completed 204 No Content in 3ms (Allocations: 1571)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:26:08 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
  [1m[36mAccount Load (0.8ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
Completed 201 Created in 8ms (Views: 6.0ms | ActiveRecord: 1.3ms | Allocations: 7108)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:28:26 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (11.6ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:28:26.688994"], ["updated_at", "2021-09-05 22:28:26.688994"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTRANSACTION (13.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 76ms (ActiveRecord: 25.2ms | Allocations: 7618)


  
NoMethodError (undefined method `id' for [#<Transfer id: nil, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 22:28:26.688994000 +0000", updated_at: "2021-09-05 22:28:26.688994000 +0000">]:Array):
  
app/services/transfer_creator.rb:20:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:9:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:32:27 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTransfer Create (8.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:32:27.540059"], ["updated_at", "2021-09-05 22:32:27.540059"]]
  ↳ app/services/transfer_creator.rb:11:in `block in send_funds'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
Completed 500 Internal Server Error in 70ms (ActiveRecord: 15.8ms | Allocations: 7653)


  
NoMethodError (undefined method `id' for [#<Transfer id: nil, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 22:32:27.540059000 +0000", updated_at: "2021-09-05 22:32:27.540059000 +0000">]:Array):
  
app/services/transfer_creator.rb:21:in `block (2 levels) in send_funds'
app/services/transfer_creator.rb:16:in `block in send_funds'
app/services/transfer_creator.rb:10:in `send_funds'
app/controllers/transfers_controller.rb:9:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:45:19 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.6ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
Completed 500 Internal Server Error in 36ms (ActiveRecord: 1.9ms | Allocations: 7282)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
app/controllers/transfers_controller.rb:14:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:47:25 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
Completed 500 Internal Server Error in 43ms (ActiveRecord: 0.5ms | Allocations: 7372)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
app/controllers/transfers_controller.rb:14:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:49:25 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (1.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:14:in `send_funds'
  [1m[36mTransfer Create (0.4ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:49:25.503448"], ["updated_at", "2021-09-05 22:49:25.503448"]]
  ↳ app/services/transfer_creator.rb:14:in `send_funds'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:14:in `send_funds'
Completed 500 Internal Server Error in 24ms (ActiveRecord: 2.9ms | Allocations: 13513)


  
NoMethodError (undefined method `destroy' for [#<Transfer id: 2, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 22:49:25.503448000 +0000", updated_at: "2021-09-05 22:49:25.503448000 +0000">]:Array):
  
app/services/transfer_creator.rb:40:in `rescue in send_funds'
app/services/transfer_creator.rb:13:in `send_funds'
app/controllers/transfers_controller.rb:9:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:51:05 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:51:05.370603"], ["updated_at", "2021-09-05 22:51:05.370603"]]
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
Completed 500 Internal Server Error in 21ms (ActiveRecord: 2.0ms | Allocations: 13513)


  
NoMethodError (undefined method `destroy' for [#<Transfer id: 3, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 22:51:05.370603000 +0000", updated_at: "2021-09-05 22:51:05.370603000 +0000">]:Array):
  
app/services/transfer_creator.rb:41:in `rescue in send_funds'
app/services/transfer_creator.rb:14:in `send_funds'
app/controllers/transfers_controller.rb:9:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:51:23 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (1.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
  [1m[36mTransfer Create (0.3ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:51:23.835708"], ["updated_at", "2021-09-05 22:51:23.835708"]]
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
Completed 500 Internal Server Error in 17ms (ActiveRecord: 2.5ms | Allocations: 13614)


  
NoMethodError (undefined method `id' for [#<Transfer id: 4, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 22:51:23.835708000 +0000", updated_at: "2021-09-05 22:51:23.835708000 +0000">]:Array):
  
app/services/transfer_creator.rb:41:in `rescue in send_funds'
app/services/transfer_creator.rb:14:in `send_funds'
app/controllers/transfers_controller.rb:9:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:51:35 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:51:35.667428"], ["updated_at", "2021-09-05 22:51:35.667428"]]
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
Completed 500 Internal Server Error in 18ms (ActiveRecord: 1.3ms | Allocations: 12473)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/services/transfer_creator.rb:41:in `rescue in send_funds'
app/services/transfer_creator.rb:14:in `send_funds'
app/controllers/transfers_controller.rb:9:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:51:57 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.9ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:51:57.562618"], ["updated_at", "2021-09-05 22:51:57.562618"]]
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
Completed 500 Internal Server Error in 17ms (ActiveRecord: 2.2ms | Allocations: 15278)


  
NoMethodError (undefined method `id' for [#<Transfer id: 6, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 22:51:57.562618000 +0000", updated_at: "2021-09-05 22:51:57.562618000 +0000">]:Array):
  
app/services/transfer_creator.rb:41:in `rescue in send_funds'
app/services/transfer_creator.rb:14:in `send_funds'
app/controllers/transfers_controller.rb:9:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:54:59 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.9ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:54:59.936427"], ["updated_at", "2021-09-05 22:54:59.936427"]]
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
Completed 500 Internal Server Error in 20ms (ActiveRecord: 4.4ms | Allocations: 12479)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/services/transfer_creator.rb:41:in `rescue in send_funds'
app/services/transfer_creator.rb:14:in `send_funds'
app/controllers/transfers_controller.rb:9:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:55:54 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:55:54.065498"], ["updated_at", "2021-09-05 22:55:54.065498"]]
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:15:in `send_funds'
Completed 500 Internal Server Error in 19ms (ActiveRecord: 2.7ms | Allocations: 13493)


  
NoMethodError (undefined method `destroy' for [#<Transfer id: 8, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-05 22:55:54.065498000 +0000", updated_at: "2021-09-05 22:55:54.065498000 +0000">]:Array):
  
app/services/transfer_creator.rb:42:in `rescue in send_funds'
app/services/transfer_creator.rb:14:in `send_funds'
app/controllers/transfers_controller.rb:9:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:57:32 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.6ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:57:32.844829"], ["updated_at", "2021-09-05 22:57:32.844829"]]
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "c7f7e1f5-9211-4325-a849-48963d16dbb8"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "c7f7e1f5-9211-4325-a849-48963d16dbb8"], ["account_id", 2], ["amount", 500.0], ["transaction_type", "deposit"], ["transfer_id", 9], ["created_at", "2021-09-05 22:57:32.858610"], ["updated_at", "2021-09-05 22:57:32.858610"]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:28:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "17a1f9cb-978e-4865-944c-a0456f07727c"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:28:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "17a1f9cb-978e-4865-944c-a0456f07727c"], ["account_id", 1], ["amount", 500.0], ["transaction_type", "withdraw"], ["transfer_id", 9], ["created_at", "2021-09-05 22:57:32.860836"], ["updated_at", "2021-09-05 22:57:32.860836"]]
  ↳ app/services/transfer_creator.rb:28:in `block in send_funds'
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:35:in `block in send_funds'
  [1m[36mAccount Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? AND "accounts"."id" != ? LIMIT ?[0m  [["account_number", "ba5d4cc3-e581-416c-af48-60546d2c2f25"], ["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:35:in `block in send_funds'
  [1m[36mAccount Update (0.1ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = ?, "updated_at" = ? WHERE "accounts"."id" = ?[0m  [["balance", -1000.0], ["updated_at", "2021-09-05 22:57:32.873424"], ["id", 2]]
  ↳ app/services/transfer_creator.rb:35:in `block in send_funds'
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:38:in `block in send_funds'
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? AND "accounts"."id" != ? LIMIT ?[0m  [["account_number", "3fa569d3-aa33-46cf-a1e3-9da4012d2129"], ["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:38:in `block in send_funds'
  [1m[36mAccount Update (0.0ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = ?, "updated_at" = ? WHERE "accounts"."id" = ?[0m  [["balance", 1000.0], ["updated_at", "2021-09-05 22:57:32.875095"], ["id", 1]]
  ↳ app/services/transfer_creator.rb:38:in `block in send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:21:in `send_funds'
Completed 201 Created in 45ms (Views: 0.8ms | ActiveRecord: 3.2ms | Allocations: 35053)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:58:51 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.5ms | Allocations: 7345)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
app/controllers/transfers_controller.rb:14:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:59:09 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:59:09.779467"], ["updated_at", "2021-09-05 22:59:09.779467"]]
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:21:in `send_funds'
  [1m[36mTransfer Destroy (0.2ms)[0m  [1m[31mDELETE FROM "transfers" WHERE "transfers"."id" = ?[0m  [["id", 10]]
  ↳ app/services/transfer_creator.rb:21:in `send_funds'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:21:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "507df1bc-a4c4-42e3-b659-49258b7c8fe3"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.6ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "507df1bc-a4c4-42e3-b659-49258b7c8fe3"], ["account_id", 2], ["amount", 500.0], ["transaction_type", "deposit"], ["transfer_id", 10], ["created_at", "2021-09-05 22:59:09.791149"], ["updated_at", "2021-09-05 22:59:09.791149"]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:22:in `send_funds'
Completed 500 Internal Server Error in 26ms (ActiveRecord: 2.4ms | Allocations: 21738)


  
NoMethodError (undefined method `errors' for false:FalseClass):
  
app/controllers/transfers_controller.rb:14:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:59:14 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:59:14.735116"], ["updated_at", "2021-09-05 22:59:14.735116"]]
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:21:in `send_funds'
  [1m[36mTransfer Destroy (0.2ms)[0m  [1m[31mDELETE FROM "transfers" WHERE "transfers"."id" = ?[0m  [["id", 10]]
  ↳ app/services/transfer_creator.rb:21:in `send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:21:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "4784a590-2ac6-4be2-854f-71026faabb61"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "4784a590-2ac6-4be2-854f-71026faabb61"], ["account_id", 2], ["amount", 500.0], ["transaction_type", "deposit"], ["transfer_id", 10], ["created_at", "2021-09-05 22:59:14.747624"], ["updated_at", "2021-09-05 22:59:14.747624"]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:22:in `send_funds'
Completed 500 Internal Server Error in 25ms (ActiveRecord: 2.6ms | Allocations: 21742)


  
NoMethodError (undefined method `errors' for false:FalseClass):
  
app/controllers/transfers_controller.rb:14:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:59:18 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTransfer Create (0.3ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 22:59:18.592945"], ["updated_at", "2021-09-05 22:59:18.592945"]]
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:21:in `send_funds'
  [1m[36mTransfer Destroy (0.2ms)[0m  [1m[31mDELETE FROM "transfers" WHERE "transfers"."id" = ?[0m  [["id", 10]]
  ↳ app/services/transfer_creator.rb:21:in `send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:21:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "11a2712b-b8cc-456f-86ad-3e9755d2ae11"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "11a2712b-b8cc-456f-86ad-3e9755d2ae11"], ["account_id", 2], ["amount", 500.0], ["transaction_type", "deposit"], ["transfer_id", 10], ["created_at", "2021-09-05 22:59:18.603296"], ["updated_at", "2021-09-05 22:59:18.603296"]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:22:in `send_funds'
Completed 500 Internal Server Error in 23ms (ActiveRecord: 2.3ms | Allocations: 21703)


  
NoMethodError (undefined method `errors' for false:FalseClass):
  
app/controllers/transfers_controller.rb:14:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 00:59:24 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.5ms | Allocations: 7324)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
app/controllers/transfers_controller.rb:14:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 01:00:02 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
Completed 422 Unprocessable Entity in 7ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 6982)


  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "account_transactions"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transaction_number" varchar, "account_id" integer NOT NULL, "amount" decimal, "transaction_type" varchar, "description" varchar, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts"[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "client_id" integer NOT NULL, "account_number" varchar, "balance" decimal, "currency" varchar, "status" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "clients"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "clients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "phone_number" varchar, "address" varchar, "city" varchar, "country" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "transfers"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transferor_id" integer, "transferee_id" integer, "execution_date" date, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_41a54502a9"
FOREIGN KEY ("transfer_id")
  REFERENCES "transfers" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccounts_on_client_id" ON "aaccounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "accounts"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "accounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_65d703860a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "accounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "aaccounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_22584f0037"
FOREIGN KEY ("transferor_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20210905214316)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20210905191045),
(20210905191051),
(20210905191738);

[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-09-05 23:11:24.739394"], ["updated_at", "2021-09-05 23:11:24.739394"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "schema_sha1"], ["value", "b2555306ca607caae1c4f678b8cd977d742f9c8b"], ["created_at", "2021-09-05 23:11:24.741851"], ["updated_at", "2021-09-05 23:11:24.741851"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "account_transactions"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transaction_number" varchar, "account_id" integer NOT NULL, "amount" decimal, "transaction_type" varchar, "description" varchar, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "client_id" integer NOT NULL, "account_number" varchar, "balance" decimal, "currency" varchar, "status" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "clients"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "clients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "phone_number" varchar, "address" varchar, "city" varchar, "country" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "transfers"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transferor_id" integer, "transferee_id" integer, "execution_date" date, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_41a54502a9"
FOREIGN KEY ("transfer_id")
  REFERENCES "transfers" ("id")
)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccounts_on_client_id" ON "aaccounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "accounts"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "accounts"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_65d703860a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "accounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "aaccounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_22584f0037"
FOREIGN KEY ("transferor_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20210905214316)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20210905191045),
(20210905191051),
(20210905191738);

[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-09-05 23:11:24.792595"], ["updated_at", "2021-09-05 23:11:24.792595"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.2ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = ?, "updated_at" = ? WHERE "ar_internal_metadata"."key" = ?[0m  [["value", "test"], ["updated_at", "2021-09-05 23:11:24.797558"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "schema_sha1"], ["value", "b2555306ca607caae1c4f678b8cd977d742f9c8b"], ["created_at", "2021-09-05 23:11:24.801683"], ["updated_at", "2021-09-05 23:11:24.801683"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "MENTOR"], ["last_name", "NILA"], ["phone_number", "38649841109"], ["created_at", "2021-09-05 23:11:24.817613"], ["updated_at", "2021-09-05 23:11:24.817613"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.1ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "JON"], ["last_name", "NILA"], ["phone_number", "38649841110"], ["created_at", "2021-09-05 23:11:24.819747"], ["updated_at", "2021-09-05 23:11:24.819747"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "090325d3-76c8-4767-9e8e-1fea1f4afa93"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 1], ["account_number", "090325d3-76c8-4767-9e8e-1fea1f4afa93"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 23:11:24.831059"], ["updated_at", "2021-09-05 23:11:24.831059"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "609b18a5-53a3-4b83-b82a-9ffc23837e0b"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 2], ["account_number", "609b18a5-53a3-4b83-b82a-9ffc23837e0b"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 23:11:24.834480"], ["updated_at", "2021-09-05 23:11:24.834480"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "MENTOR"], ["last_name", "NILA"], ["phone_number", "38649841109"], ["created_at", "2021-09-05 23:11:33.879083"], ["updated_at", "2021-09-05 23:11:33.879083"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.1ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "JON"], ["last_name", "NILA"], ["phone_number", "38649841110"], ["created_at", "2021-09-05 23:11:33.881279"], ["updated_at", "2021-09-05 23:11:33.881279"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "65d53a43-5aae-4ac6-9fc2-7ef97bab80ac"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 1], ["account_number", "65d53a43-5aae-4ac6-9fc2-7ef97bab80ac"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 23:11:33.888740"], ["updated_at", "2021-09-05 23:11:33.888740"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "2062219f-18f8-463a-93f1-9197d56efd11"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 2], ["account_number", "2062219f-18f8-463a-93f1-9197d56efd11"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 23:11:33.891454"], ["updated_at", "2021-09-05 23:11:33.891454"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 01:11:39 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
Completed 422 Unprocessable Entity in 9ms (Views: 0.1ms | ActiveRecord: 0.7ms | Allocations: 6427)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 01:12:10 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:19:in `send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 23:12:10.240569"], ["updated_at", "2021-09-05 23:12:10.240569"]]
  ↳ app/services/transfer_creator.rb:19:in `send_funds'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:19:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "202cd458-3bfc-43fa-8b97-5c1325889eab"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.3ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "202cd458-3bfc-43fa-8b97-5c1325889eab"], ["account_id", 2], ["amount", 500.0], ["transaction_type", "deposit"], ["transfer_id", 1], ["created_at", "2021-09-05 23:12:10.251432"], ["updated_at", "2021-09-05 23:12:10.251432"]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:27:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "7454e7f7-a97e-4d3a-b2c5-6ea47e7194dd"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:27:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "7454e7f7-a97e-4d3a-b2c5-6ea47e7194dd"], ["account_id", 1], ["amount", 500.0], ["transaction_type", "withdraw"], ["transfer_id", 1], ["created_at", "2021-09-05 23:12:10.253324"], ["updated_at", "2021-09-05 23:12:10.253324"]]
  ↳ app/services/transfer_creator.rb:27:in `block in send_funds'
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:34:in `block in send_funds'
  [1m[36mAccount Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? AND "accounts"."id" != ? LIMIT ?[0m  [["account_number", "609b18a5-53a3-4b83-b82a-9ffc23837e0b"], ["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:34:in `block in send_funds'
  [1m[36mAccount Update (0.1ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = ?, "updated_at" = ? WHERE "accounts"."id" = ?[0m  [["balance", -500.0], ["updated_at", "2021-09-05 23:12:10.261917"], ["id", 2]]
  ↳ app/services/transfer_creator.rb:34:in `block in send_funds'
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:37:in `block in send_funds'
  [1m[36mAccount Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? AND "accounts"."id" != ? LIMIT ?[0m  [["account_number", "090325d3-76c8-4767-9e8e-1fea1f4afa93"], ["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:37:in `block in send_funds'
  [1m[36mAccount Update (0.1ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = ?, "updated_at" = ? WHERE "accounts"."id" = ?[0m  [["balance", 500.0], ["updated_at", "2021-09-05 23:12:10.266005"], ["id", 1]]
  ↳ app/services/transfer_creator.rb:37:in `block in send_funds'
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
Completed 201 Created in 46ms (Views: 0.1ms | ActiveRecord: 5.9ms | Allocations: 36317)


  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "account_transactions"[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transaction_number" varchar, "account_id" integer NOT NULL, "amount" decimal, "transaction_type" varchar, "description" varchar, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "client_id" integer NOT NULL, "account_number" varchar, "balance" decimal, "currency" varchar, "status" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "clients"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "clients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "phone_number" varchar, "address" varchar, "city" varchar, "country" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "transfers"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transferor_id" integer, "transferee_id" integer, "execution_date" date, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_41a54502a9"
FOREIGN KEY ("transfer_id")
  REFERENCES "transfers" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccounts_on_client_id" ON "aaccounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "accounts"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "accounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_65d703860a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "accounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "aaccounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (4.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_22584f0037"
FOREIGN KEY ("transferor_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20210905214316)[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20210905191045),
(20210905191051),
(20210905191738);

[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-09-05 23:13:34.471189"], ["updated_at", "2021-09-05 23:13:34.471189"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "schema_sha1"], ["value", "b2555306ca607caae1c4f678b8cd977d742f9c8b"], ["created_at", "2021-09-05 23:13:34.474557"], ["updated_at", "2021-09-05 23:13:34.474557"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "account_transactions"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transaction_number" varchar, "account_id" integer NOT NULL, "amount" decimal, "transaction_type" varchar, "description" varchar, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "client_id" integer NOT NULL, "account_number" varchar, "balance" decimal, "currency" varchar, "status" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "clients"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "clients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "phone_number" varchar, "address" varchar, "city" varchar, "country" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "transfers"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transferor_id" integer, "transferee_id" integer, "execution_date" date, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_41a54502a9"
FOREIGN KEY ("transfer_id")
  REFERENCES "transfers" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "tindex_aaccounts_on_client_id" ON "aaccounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "accounts"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "accounts"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_65d703860a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "accounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "aaccounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (1.4ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_22584f0037"
FOREIGN KEY ("transferor_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20210905214316)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20210905191045),
(20210905191051),
(20210905191738);

[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-09-05 23:13:34.531812"], ["updated_at", "2021-09-05 23:13:34.531812"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.2ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = ?, "updated_at" = ? WHERE "ar_internal_metadata"."key" = ?[0m  [["value", "test"], ["updated_at", "2021-09-05 23:13:34.535122"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "schema_sha1"], ["value", "b2555306ca607caae1c4f678b8cd977d742f9c8b"], ["created_at", "2021-09-05 23:13:34.538004"], ["updated_at", "2021-09-05 23:13:34.538004"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "MENTOR"], ["last_name", "NILA"], ["phone_number", "38649841109"], ["created_at", "2021-09-05 23:13:34.551451"], ["updated_at", "2021-09-05 23:13:34.551451"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "JON"], ["last_name", "NILA"], ["phone_number", "38649841110"], ["created_at", "2021-09-05 23:13:34.553604"], ["updated_at", "2021-09-05 23:13:34.553604"]]
  [1m[36mTRANSACTION (3.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "c898ac73-d495-4dd4-a81d-37db9f504439"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 2], ["account_number", "c898ac73-d495-4dd4-a81d-37db9f504439"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 23:13:34.572190"], ["updated_at", "2021-09-05 23:13:34.572190"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "MENTOR"], ["last_name", "NILA"], ["phone_number", "38649841109"], ["created_at", "2021-09-05 23:13:39.961278"], ["updated_at", "2021-09-05 23:13:39.961278"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.1ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "JON"], ["last_name", "NILA"], ["phone_number", "38649841110"], ["created_at", "2021-09-05 23:13:39.963129"], ["updated_at", "2021-09-05 23:13:39.963129"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "37e67db6-07da-474b-baac-2be07e895d9b"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 2], ["account_number", "37e67db6-07da-474b-baac-2be07e895d9b"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 23:13:39.974448"], ["updated_at", "2021-09-05 23:13:39.974448"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 01:14:47 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (1.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
Completed 422 Unprocessable Entity in 21ms (Views: 0.1ms | ActiveRecord: 7.7ms | Allocations: 6986)


  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "account_transactions"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transaction_number" varchar, "account_id" integer NOT NULL, "amount" decimal, "transaction_type" varchar, "description" varchar, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "client_id" integer NOT NULL, "account_number" varchar, "balance" decimal, "currency" varchar, "status" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "clients"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "clients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "phone_number" varchar, "address" varchar, "city" varchar, "country" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "transfers"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transferor_id" integer, "transferee_id" integer, "execution_date" date, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_41a54502a9"
FOREIGN KEY ("transfer_id")
  REFERENCES "transfers" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccounts_on_client_id" ON "aaccounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "accounts"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "accounts"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_65d703860a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "accounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "aaccounts"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "aaccounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_22584f0037"
FOREIGN KEY ("transferor_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20210905214316)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20210905191045),
(20210905191051),
(20210905191738);

[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-09-05 23:15:01.672102"], ["updated_at", "2021-09-05 23:15:01.672102"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "schema_sha1"], ["value", "b2555306ca607caae1c4f678b8cd977d742f9c8b"], ["created_at", "2021-09-05 23:15:01.675472"], ["updated_at", "2021-09-05 23:15:01.675472"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "account_transactions"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transaction_number" varchar, "account_id" integer NOT NULL, "amount" decimal, "transaction_type" varchar, "description" varchar, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "client_id" integer NOT NULL, "account_number" varchar, "balance" decimal, "currency" varchar, "status" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "clients"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "clients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "phone_number" varchar, "address" varchar, "city" varchar, "country" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "transfers"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transferor_id" integer, "transferee_id" integer, "execution_date" date, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_41a54502a9"
FOREIGN KEY ("transfer_id")
  REFERENCES "transfers" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccounts_on_client_id" ON "aaccounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "accounts"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "accounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_65d703860a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "accounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "aaccounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_22584f0037"
FOREIGN KEY ("transferor_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20210905214316)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20210905191045),
(20210905191051),
(20210905191738);

[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-09-05 23:15:01.726079"], ["updated_at", "2021-09-05 23:15:01.726079"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.2ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = ?, "updated_at" = ? WHERE "ar_internal_metadata"."key" = ?[0m  [["value", "test"], ["updated_at", "2021-09-05 23:15:01.728923"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "schema_sha1"], ["value", "b2555306ca607caae1c4f678b8cd977d742f9c8b"], ["created_at", "2021-09-05 23:15:01.731671"], ["updated_at", "2021-09-05 23:15:01.731671"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "MENTOR"], ["last_name", "NILA"], ["phone_number", "38649841109"], ["created_at", "2021-09-05 23:15:01.751065"], ["updated_at", "2021-09-05 23:15:01.751065"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.1ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "JON"], ["last_name", "NILA"], ["phone_number", "38649841110"], ["created_at", "2021-09-05 23:15:01.753248"], ["updated_at", "2021-09-05 23:15:01.753248"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "959b40d1-2a9d-4fd6-8c2f-a77abee72c6b"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 2], ["account_number", "959b40d1-2a9d-4fd6-8c2f-a77abee72c6b"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 23:15:01.765777"], ["updated_at", "2021-09-05 23:15:01.765777"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "MENTOR"], ["last_name", "NILA"], ["phone_number", "38649841109"], ["created_at", "2021-09-05 23:15:06.670786"], ["updated_at", "2021-09-05 23:15:06.670786"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.1ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "JON"], ["last_name", "NILA"], ["phone_number", "38649841110"], ["created_at", "2021-09-05 23:15:06.673294"], ["updated_at", "2021-09-05 23:15:06.673294"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "554ac32e-88a3-450e-9097-de96f98591f1"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 2], ["account_number", "554ac32e-88a3-450e-9097-de96f98591f1"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 23:15:06.682741"], ["updated_at", "2021-09-05 23:15:06.682741"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 01:15:09 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
Completed 422 Unprocessable Entity in 7ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 6897)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 01:15:15 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:19:in `send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 23:15:15.955663"], ["updated_at", "2021-09-05 23:15:15.955663"]]
  ↳ app/services/transfer_creator.rb:19:in `send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:19:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "5d5cb104-6171-494d-a444-26decd4e8629"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "5d5cb104-6171-494d-a444-26decd4e8629"], ["account_id", 2], ["amount", 500.0], ["transaction_type", "deposit"], ["transfer_id", 1], ["created_at", "2021-09-05 23:15:15.964723"], ["updated_at", "2021-09-05 23:15:15.964723"]]
  ↳ app/services/transfer_creator.rb:21:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:27:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "5d264a00-a9d1-4f33-8d5a-05b47720d55e"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:27:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "5d264a00-a9d1-4f33-8d5a-05b47720d55e"], ["account_id", 1], ["amount", 500.0], ["transaction_type", "withdraw"], ["transfer_id", 1], ["created_at", "2021-09-05 23:15:15.966710"], ["updated_at", "2021-09-05 23:15:15.966710"]]
  ↳ app/services/transfer_creator.rb:27:in `block in send_funds'
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:34:in `block in send_funds'
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? AND "accounts"."id" != ? LIMIT ?[0m  [["account_number", "554ac32e-88a3-450e-9097-de96f98591f1"], ["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:34:in `block in send_funds'
  [1m[36mAccount Update (0.1ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = ?, "updated_at" = ? WHERE "accounts"."id" = ?[0m  [["balance", -500.0], ["updated_at", "2021-09-05 23:15:15.974082"], ["id", 2]]
  ↳ app/services/transfer_creator.rb:34:in `block in send_funds'
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:37:in `block in send_funds'
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? AND "accounts"."id" != ? LIMIT ?[0m  [["account_number", "959b40d1-2a9d-4fd6-8c2f-a77abee72c6b"], ["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:37:in `block in send_funds'
  [1m[36mAccount Update (0.0ms)[0m  [1m[33mUPDATE "accounts" SET "balance" = ?, "updated_at" = ? WHERE "accounts"."id" = ?[0m  [["balance", 500.0], ["updated_at", "2021-09-05 23:15:15.975734"], ["id", 1]]
  ↳ app/services/transfer_creator.rb:37:in `block in send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
Completed 201 Created in 33ms (Views: 0.1ms | ActiveRecord: 2.5ms | Allocations: 31897)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 01:15:42 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
Completed 201 Created in 9ms (Views: 5.5ms | ActiveRecord: 0.5ms | Allocations: 6777)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "account_transactions"[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transaction_number" varchar, "account_id" integer NOT NULL, "amount" decimal, "transaction_type" varchar, "description" varchar, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "client_id" integer NOT NULL, "account_number" varchar, "balance" decimal, "currency" varchar, "status" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "clients"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "clients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "phone_number" varchar, "address" varchar, "city" varchar, "country" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "transfers"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transferor_id" integer, "transferee_id" integer, "execution_date" date, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_41a54502a9"
FOREIGN KEY ("transfer_id")
  REFERENCES "transfers" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccounts_on_client_id" ON "aaccounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "accounts"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "accounts"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_65d703860a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "accounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "aaccounts"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "aaccounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_22584f0037"
FOREIGN KEY ("transferor_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20210905214316)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20210905191045),
(20210905191051),
(20210905191738);

[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-09-05 23:15:54.279561"], ["updated_at", "2021-09-05 23:15:54.279561"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "schema_sha1"], ["value", "b2555306ca607caae1c4f678b8cd977d742f9c8b"], ["created_at", "2021-09-05 23:15:54.282615"], ["updated_at", "2021-09-05 23:15:54.282615"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "account_transactions"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transaction_number" varchar, "account_id" integer NOT NULL, "amount" decimal, "transaction_type" varchar, "description" varchar, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "client_id" integer NOT NULL, "account_number" varchar, "balance" decimal, "currency" varchar, "status" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "clients"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "clients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "phone_number" varchar, "address" varchar, "city" varchar, "country" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "transfers"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transferor_id" integer, "transferee_id" integer, "execution_date" date, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccount_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_transfer_id" ON "aaccount_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccount_transactions_on_account_id" ON "aaccount_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccount_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "account_transactions"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "account_transactions"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer NOT NULL PRIMARY KEY, "transaction_number" varchar DEFAULT NULL, "account_id" integer NOT NULL, "amount" decimal DEFAULT NULL, "transaction_type" varchar DEFAULT NULL, "description" varchar DEFAULT NULL, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_41a54502a9"
FOREIGN KEY ("transfer_id")
  REFERENCES "transfers" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at")
                     SELECT "id","transaction_number","account_id","amount","transaction_type","description","transfer_id","created_at","updated_at" FROM "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccount_transactions"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aaccounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aaccounts_on_client_id" ON "aaccounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aaccounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "accounts"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "accounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer NOT NULL PRIMARY KEY, "client_id" integer NOT NULL, "account_number" varchar DEFAULT NULL, "balance" decimal DEFAULT NULL, "currency" varchar DEFAULT NULL, "status" varchar DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_65d703860a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "accounts" ("id","client_id","account_number","balance","currency","status","created_at","updated_at")
                     SELECT "id","client_id","account_number","balance","currency","status","created_at","updated_at" FROM "aaccounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aaccounts"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "atransfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferor_id" ON "atransfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_atransfers_on_transferee_id" ON "atransfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "atransfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "transfers"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "transfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer NOT NULL PRIMARY KEY, "transferor_id" integer DEFAULT NULL, "transferee_id" integer DEFAULT NULL, "execution_date" date DEFAULT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_22584f0037"
FOREIGN KEY ("transferor_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "transfers" ("id","transferor_id","transferee_id","execution_date","created_at","updated_at")
                     SELECT "id","transferor_id","transferee_id","execution_date","created_at","updated_at" FROM "atransfers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "atransfers"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20210905214316)[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20210905191045),
(20210905191051),
(20210905191738);

[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-09-05 23:15:54.336981"], ["updated_at", "2021-09-05 23:15:54.336981"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.1ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = ?, "updated_at" = ? WHERE "ar_internal_metadata"."key" = ?[0m  [["value", "test"], ["updated_at", "2021-09-05 23:15:54.340599"], ["key", "environment"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "schema_sha1"], ["value", "b2555306ca607caae1c4f678b8cd977d742f9c8b"], ["created_at", "2021-09-05 23:15:54.345857"], ["updated_at", "2021-09-05 23:15:54.345857"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "MENTOR"], ["last_name", "NILA"], ["phone_number", "38649841109"], ["created_at", "2021-09-05 23:15:54.361837"], ["updated_at", "2021-09-05 23:15:54.361837"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.1ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "JON"], ["last_name", "NILA"], ["phone_number", "38649841110"], ["created_at", "2021-09-05 23:15:54.364005"], ["updated_at", "2021-09-05 23:15:54.364005"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "26001091-3c57-42d1-b153-65d6e198d52c"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 2], ["account_number", "26001091-3c57-42d1-b153-65d6e198d52c"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 23:15:54.374628"], ["updated_at", "2021-09-05 23:15:54.374628"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 01:15:56 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
Completed 201 Created in 2ms (Views: 2.1ms | ActiveRecord: 0.1ms | Allocations: 878)


  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateClients (20210905191045)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "clients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "phone_number" varchar, "address" varchar, "city" varchar, "country" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191045"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateAccounts (20210905191051)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "client_id" integer NOT NULL, "account_number" varchar, "balance" decimal, "currency" varchar, "status" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_65d703860a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191051"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateTransfers (20210905191738)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transferor_id" integer, "transferee_id" integer, "execution_date" date, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_22584f0037"
FOREIGN KEY ("transferor_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191738"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateAccountTransactions (20210905214316)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transaction_number" varchar, "account_id" integer NOT NULL, "amount" decimal, "transaction_type" varchar, "description" varchar, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_41a54502a9"
FOREIGN KEY ("transfer_id")
  REFERENCES "transfers" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905214316"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-09-05 23:16:29.921360"], ["updated_at", "2021-09-05 23:16:29.921360"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 01:16:33 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
Completed 201 Created in 3ms (Views: 1.4ms | ActiveRecord: 0.2ms | Allocations: 2701)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "MENTOR"], ["last_name", "NILA"], ["phone_number", "38649841109"], ["created_at", "2021-09-05 23:16:38.657111"], ["updated_at", "2021-09-05 23:16:38.657111"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.1ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "JON"], ["last_name", "NILA"], ["phone_number", "38649841110"], ["created_at", "2021-09-05 23:16:38.658839"], ["updated_at", "2021-09-05 23:16:38.658839"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "77a86511-28d0-4110-8895-cc3c6247bba3"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 2], ["account_number", "77a86511-28d0-4110-8895-cc3c6247bba3"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 23:16:38.669375"], ["updated_at", "2021-09-05 23:16:38.669375"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 01:16:42 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
Completed 201 Created in 16ms (Views: 12.9ms | ActiveRecord: 3.3ms | Allocations: 4548)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 01:17:04 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
Completed 201 Created in 2ms (Views: 1.6ms | ActiveRecord: 0.1ms | Allocations: 731)


  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateClients (20210905191045)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "clients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "phone_number" varchar, "address" varchar, "city" varchar, "country" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191045"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateAccounts (20210905191051)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "client_id" integer NOT NULL, "account_number" varchar, "balance" decimal, "currency" varchar, "status" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_65d703860a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191051"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateTransfers (20210905191738)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transferor_id" integer, "transferee_id" integer, "execution_date" date, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_22584f0037"
FOREIGN KEY ("transferor_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191738"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateAccountTransactions (20210905214316)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transaction_number" varchar, "account_id" integer NOT NULL, "amount" decimal, "transaction_type" varchar, "description" varchar, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_41a54502a9"
FOREIGN KEY ("transfer_id")
  REFERENCES "transfers" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905214316"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-09-05 23:17:37.085536"], ["updated_at", "2021-09-05 23:17:37.085536"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "MENTOR"], ["last_name", "NILA"], ["phone_number", "38649841109"], ["created_at", "2021-09-05 23:17:39.563108"], ["updated_at", "2021-09-05 23:17:39.563108"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.1ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "JON"], ["last_name", "NILA"], ["phone_number", "38649841110"], ["created_at", "2021-09-05 23:17:39.564841"], ["updated_at", "2021-09-05 23:17:39.564841"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 01:17:42 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
Completed 201 Created in 3ms (Views: 1.5ms | ActiveRecord: 0.2ms | Allocations: 2673)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "MENTOR"], ["last_name", "NILA"], ["phone_number", "38649841109"], ["created_at", "2021-09-05 23:17:50.418362"], ["updated_at", "2021-09-05 23:17:50.418362"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.1ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "JON"], ["last_name", "NILA"], ["phone_number", "38649841110"], ["created_at", "2021-09-05 23:17:50.420088"], ["updated_at", "2021-09-05 23:17:50.420088"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 01:17:53 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
Completed 201 Created in 2ms (Views: 1.4ms | ActiveRecord: 0.1ms | Allocations: 589)


  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "MENTOR"], ["last_name", "NILA"], ["phone_number", "38649841109"], ["created_at", "2021-09-05 23:18:44.946764"], ["updated_at", "2021-09-05 23:18:44.946764"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.1ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "JON"], ["last_name", "NILA"], ["phone_number", "38649841110"], ["created_at", "2021-09-05 23:18:44.948913"], ["updated_at", "2021-09-05 23:18:44.948913"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "e9025127-7d16-439f-9147-02da41414135"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 1], ["account_number", "e9025127-7d16-439f-9147-02da41414135"], ["balance", 1000.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 23:18:44.959036"], ["updated_at", "2021-09-05 23:18:44.959036"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "b73de937-c51e-4f77-8a93-593e112b5ee4"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 2], ["account_number", "b73de937-c51e-4f77-8a93-593e112b5ee4"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 23:18:44.962282"], ["updated_at", "2021-09-05 23:18:44.962282"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 01:18:46 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"500", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
Completed 201 Created in 12ms (Views: 9.8ms | ActiveRecord: 4.4ms | Allocations: 6802)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 01:19:18 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"50", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
Completed 422 Unprocessable Entity in 10ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 6905)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 01:19:32 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"50", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
Completed 201 Created in 9ms (Views: 5.0ms | ActiveRecord: 0.4ms | Allocations: 6743)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 01:20:04 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"50", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTransfer Create (0.4ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 23:20:04.327554"], ["updated_at", "2021-09-05 23:20:04.327554"]]
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "9aa84ece-1892-4c1a-9193-f91cda174aa4"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "9aa84ece-1892-4c1a-9193-f91cda174aa4"], ["account_id", 2], ["amount", 50.0], ["transaction_type", "deposit"], ["transfer_id", 1], ["created_at", "2021-09-05 23:20:04.336840"], ["updated_at", "2021-09-05 23:20:04.336840"]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:28:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "80dd55c2-def4-4f02-9f10-b829d39f2296"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:28:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "80dd55c2-def4-4f02-9f10-b829d39f2296"], ["account_id", 1], ["amount", 50.0], ["transaction_type", "withdraw"], ["transfer_id", 1], ["created_at", "2021-09-05 23:20:04.338606"], ["updated_at", "2021-09-05 23:20:04.338606"]]
  ↳ app/services/transfer_creator.rb:28:in `block in send_funds'
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:35:in `block in send_funds'
  [1m[36mAccount Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? AND "accounts"."id" != ? LIMIT ?[0m  [["account_number", "4b8036ed-aaa1-46cf-96f0-005d281809cd"], ["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:35:in `block in send_funds'
  [1m[36mAccount Update (0.1ms)[0m  [1m[33mUPDATE "accounts" SET "account_number" = ?, "balance" = ?, "updated_at" = ? WHERE "accounts"."id" = ?[0m  [["account_number", "4b8036ed-aaa1-46cf-96f0-005d281809cd"], ["balance", -50.0], ["updated_at", "2021-09-05 23:20:04.346098"], ["id", 2]]
  ↳ app/services/transfer_creator.rb:35:in `block in send_funds'
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:38:in `block in send_funds'
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? AND "accounts"."id" != ? LIMIT ?[0m  [["account_number", "f1af2dcb-87dd-44aa-8c63-40d37fce602a"], ["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:38:in `block in send_funds'
  [1m[36mAccount Update (0.0ms)[0m  [1m[33mUPDATE "accounts" SET "account_number" = ?, "balance" = ?, "updated_at" = ? WHERE "accounts"."id" = ?[0m  [["account_number", "f1af2dcb-87dd-44aa-8c63-40d37fce602a"], ["balance", 1050.0], ["updated_at", "2021-09-05 23:20:04.348369"], ["id", 1]]
  ↳ app/services/transfer_creator.rb:38:in `block in send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:21:in `send_funds'
Completed 201 Created in 34ms (Views: 0.1ms | ActiveRecord: 2.6ms | Allocations: 31935)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 01:20:21 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"50", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts"[0m
  ↳ app/controllers/transfers_controller.rb:5:in `create'
Completed 201 Created in 7ms (Views: 5.8ms | ActiveRecord: 0.5ms | Allocations: 6742)


Started GET "/accounts/1" for 127.0.0.1 at 2021-09-06 01:30:41 +0200
Processing by AccountsController#show as */*
  Parameters: {"id"=>"1"}
Completed 500 Internal Server Error in 1ms (Allocations: 547)


  
NoMethodError (undefined method `balance' for nil:NilClass):
  
app/controllers/accounts_controller.rb:5:in `show'
Started GET "/accounts/1" for 127.0.0.1 at 2021-09-06 01:31:39 +0200
Processing by AccountsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/accounts_controller.rb:5:in `show'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/accounts_controller.rb:5:in `show'
Completed 500 Internal Server Error in 21ms (ActiveRecord: 0.8ms | Allocations: 8150)


  
NoMethodError (undefined method `transactions' for #<Account id: 1, client_id: 1, account_number: "f1af2dcb-87dd-44aa-8c63-40d37fce602a", balance: 0.105e4, currency: "USD", status: "ACTIVE", created_at: "2021-09-05 23:18:44.959036000 +0000", updated_at: "2021-09-05 23:20:04.348369000 +0000">
Did you mean?  transaction):
  
app/controllers/accounts_controller.rb:6:in `show'
Started GET "/accounts/1" for 127.0.0.1 at 2021-09-06 01:32:08 +0200
Processing by AccountsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/accounts_controller.rb:5:in `show'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/accounts_controller.rb:5:in `show'
  [1m[36mAccountTransaction Load (0.2ms)[0m  [1m[34mSELECT "account_transactions".* FROM "account_transactions" WHERE "account_transactions"."account_id" = ? ORDER BY "account_transactions"."id" DESC LIMIT ?[0m  [["account_id", 1], ["LIMIT", 10]]
  ↳ app/controllers/accounts_controller.rb:6:in `show'
Completed 200 OK in 20ms (Views: 0.6ms | ActiveRecord: 0.9ms | Allocations: 14284)


  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateClients (20210905191045)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "clients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar, "last_name" varchar, "phone_number" varchar, "address" varchar, "city" varchar, "country" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191045"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateAccounts (20210905191051)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "client_id" integer NOT NULL, "account_number" varchar, "balance" decimal, "currency" varchar, "status" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_65d703860a"
FOREIGN KEY ("client_id")
  REFERENCES "clients" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_accounts_on_client_id" ON "accounts" ("client_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191051"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateTransfers (20210905191738)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "transfers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transferor_id" integer, "transferee_id" integer, "execution_date" date, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_22584f0037"
FOREIGN KEY ("transferor_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_ef0dae4f7a"
FOREIGN KEY ("transferee_id")
  REFERENCES "accounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferor_id" ON "transfers" ("transferor_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_transfers_on_transferee_id" ON "transfers" ("transferee_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905191738"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateAccountTransactions (20210905214316)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "account_transactions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "transaction_number" varchar, "account_id" integer NOT NULL, "amount" decimal, "transaction_type" varchar, "description" varchar, "transfer_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_fc4e13c982"
FOREIGN KEY ("account_id")
  REFERENCES "accounts" ("id")
, CONSTRAINT "fk_rails_41a54502a9"
FOREIGN KEY ("transfer_id")
  REFERENCES "transfers" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_account_id" ON "account_transactions" ("account_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_account_transactions_on_transfer_id" ON "account_transactions" ("transfer_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20210905214316"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2021-09-05 23:32:30.312765"], ["updated_at", "2021-09-05 23:32:30.312765"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "MENTOR"], ["last_name", "NILA"], ["phone_number", "38649841109"], ["created_at", "2021-09-05 23:32:33.391520"], ["updated_at", "2021-09-05 23:32:33.391520"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Create (0.1ms)[0m  [1m[32mINSERT INTO "clients" ("first_name", "last_name", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["first_name", "JON"], ["last_name", "NILA"], ["phone_number", "38649841110"], ["created_at", "2021-09-05 23:32:33.393379"], ["updated_at", "2021-09-05 23:32:33.393379"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "45ce06eb-4da3-4e9c-9f5c-131d0bb3a82b"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 1], ["account_number", "45ce06eb-4da3-4e9c-9f5c-131d0bb3a82b"], ["balance", 10000.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 23:32:33.402463"], ["updated_at", "2021-09-05 23:32:33.402463"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? LIMIT ?[0m  [["account_number", "c215234a-75dc-4ebd-99dd-be35164fc95e"], ["LIMIT", 1]]
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("client_id", "account_number", "balance", "currency", "status", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 2], ["account_number", "c215234a-75dc-4ebd-99dd-be35164fc95e"], ["balance", 0.0], ["currency", "USD"], ["status", "ACTIVE"], ["created_at", "2021-09-05 23:32:33.405076"], ["updated_at", "2021-09-05 23:32:33.405076"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Started GET "/accounts/1" for 127.0.0.1 at 2021-09-06 01:32:42 +0200
Processing by AccountsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/accounts_controller.rb:5:in `show'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/accounts_controller.rb:5:in `show'
  [1m[36mAccountTransaction Load (0.2ms)[0m  [1m[34mSELECT "account_transactions".* FROM "account_transactions" WHERE "account_transactions"."account_id" = ? ORDER BY "account_transactions"."id" DESC LIMIT ?[0m  [["account_id", 1], ["LIMIT", 10]]
  ↳ app/controllers/accounts_controller.rb:6:in `show'
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 8732)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 01:32:46 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"50", "execution_date"=>"2021-09-01"}
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 23:32:46.249383"], ["updated_at", "2021-09-05 23:32:46.249383"]]
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "e7cfabef-b716-44da-abe9-0f80126bf6ba"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "e7cfabef-b716-44da-abe9-0f80126bf6ba"], ["account_id", 2], ["amount", 50.0], ["transaction_type", "deposit"], ["transfer_id", 1], ["created_at", "2021-09-05 23:32:46.257252"], ["updated_at", "2021-09-05 23:32:46.257252"]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:28:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "70bdc1e8-50cb-49e8-8d76-5355cc7ed772"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:28:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "70bdc1e8-50cb-49e8-8d76-5355cc7ed772"], ["account_id", 1], ["amount", 50.0], ["transaction_type", "withdraw"], ["transfer_id", 1], ["created_at", "2021-09-05 23:32:46.259078"], ["updated_at", "2021-09-05 23:32:46.259078"]]
  ↳ app/services/transfer_creator.rb:28:in `block in send_funds'
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:35:in `block in send_funds'
  [1m[36mAccount Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? AND "accounts"."id" != ? LIMIT ?[0m  [["account_number", "f62a9903-8572-4ad0-9693-dbe820fa5f43"], ["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:35:in `block in send_funds'
  [1m[36mAccount Update (0.1ms)[0m  [1m[33mUPDATE "accounts" SET "account_number" = ?, "balance" = ?, "updated_at" = ? WHERE "accounts"."id" = ?[0m  [["account_number", "f62a9903-8572-4ad0-9693-dbe820fa5f43"], ["balance", 50.0], ["updated_at", "2021-09-05 23:32:46.268069"], ["id", 2]]
  ↳ app/services/transfer_creator.rb:35:in `block in send_funds'
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:38:in `block in send_funds'
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? AND "accounts"."id" != ? LIMIT ?[0m  [["account_number", "88c33cb7-1847-42c7-a8c8-24e0c07e9d4c"], ["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:38:in `block in send_funds'
  [1m[36mAccount Update (0.0ms)[0m  [1m[33mUPDATE "accounts" SET "account_number" = ?, "balance" = ?, "updated_at" = ? WHERE "accounts"."id" = ?[0m  [["account_number", "88c33cb7-1847-42c7-a8c8-24e0c07e9d4c"], ["balance", 9950.0], ["updated_at", "2021-09-05 23:32:46.270175"], ["id", 1]]
  ↳ app/services/transfer_creator.rb:38:in `block in send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:21:in `send_funds'
Completed 201 Created in 39ms (Views: 0.2ms | ActiveRecord: 2.7ms | Allocations: 24785)


Started GET "/accounts/1" for 127.0.0.1 at 2021-09-06 01:32:49 +0200
Processing by AccountsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/accounts_controller.rb:5:in `show'
  [1m[36mAccountTransaction Load (0.1ms)[0m  [1m[34mSELECT "account_transactions".* FROM "account_transactions" WHERE "account_transactions"."account_id" = ? ORDER BY "account_transactions"."id" DESC LIMIT ?[0m  [["account_id", 1], ["LIMIT", 10]]
  ↳ app/controllers/accounts_controller.rb:6:in `show'
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 1299)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 01:32:55 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"50", "execution_date"=>"2021-09-01"}
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTransfer Create (0.4ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 23:32:55.834209"], ["updated_at", "2021-09-05 23:32:55.834209"]]
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "bf0dde18-cfb1-41aa-b97f-c99fb75a0711"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "bf0dde18-cfb1-41aa-b97f-c99fb75a0711"], ["account_id", 2], ["amount", 50.0], ["transaction_type", "deposit"], ["transfer_id", 2], ["created_at", "2021-09-05 23:32:55.843938"], ["updated_at", "2021-09-05 23:32:55.843938"]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:28:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "d6fa24e1-90c3-4606-8179-658d68c95611"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:28:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "d6fa24e1-90c3-4606-8179-658d68c95611"], ["account_id", 1], ["amount", 50.0], ["transaction_type", "withdraw"], ["transfer_id", 2], ["created_at", "2021-09-05 23:32:55.851563"], ["updated_at", "2021-09-05 23:32:55.851563"]]
  ↳ app/services/transfer_creator.rb:28:in `block in send_funds'
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:35:in `block in send_funds'
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? AND "accounts"."id" != ? LIMIT ?[0m  [["account_number", "6c384fb3-b160-4cc0-b7e0-0a834cd6efb0"], ["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:35:in `block in send_funds'
  [1m[36mAccount Update (0.0ms)[0m  [1m[33mUPDATE "accounts" SET "account_number" = ?, "balance" = ?, "updated_at" = ? WHERE "accounts"."id" = ?[0m  [["account_number", "6c384fb3-b160-4cc0-b7e0-0a834cd6efb0"], ["balance", 100.0], ["updated_at", "2021-09-05 23:32:55.853394"], ["id", 2]]
  ↳ app/services/transfer_creator.rb:35:in `block in send_funds'
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:38:in `block in send_funds'
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? AND "accounts"."id" != ? LIMIT ?[0m  [["account_number", "9512403d-7a00-44af-917b-cbe93b431b3d"], ["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:38:in `block in send_funds'
  [1m[36mAccount Update (0.0ms)[0m  [1m[33mUPDATE "accounts" SET "account_number" = ?, "balance" = ?, "updated_at" = ? WHERE "accounts"."id" = ?[0m  [["account_number", "9512403d-7a00-44af-917b-cbe93b431b3d"], ["balance", 9900.0], ["updated_at", "2021-09-05 23:32:55.854775"], ["id", 1]]
  ↳ app/services/transfer_creator.rb:38:in `block in send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:21:in `send_funds'
Completed 201 Created in 24ms (Views: 0.1ms | ActiveRecord: 4.2ms | Allocations: 12150)


Started GET "/accounts/1" for 127.0.0.1 at 2021-09-06 01:32:58 +0200
Processing by AccountsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/accounts_controller.rb:5:in `show'
  [1m[36mAccountTransaction Load (0.1ms)[0m  [1m[34mSELECT "account_transactions".* FROM "account_transactions" WHERE "account_transactions"."account_id" = ? ORDER BY "account_transactions"."id" DESC LIMIT ?[0m  [["account_id", 1], ["LIMIT", 10]]
  ↳ app/controllers/accounts_controller.rb:6:in `show'
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 1412)


Started GET "/accounts/1" for 127.0.0.1 at 2021-09-06 01:33:09 +0200
Processing by AccountsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/accounts_controller.rb:5:in `show'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/accounts_controller.rb:5:in `show'
  [1m[36mAccountTransaction Load (0.1ms)[0m  [1m[34mSELECT "account_transactions".* FROM "account_transactions" WHERE "account_transactions"."account_id" = ? ORDER BY "account_transactions"."id" DESC LIMIT ?[0m  [["account_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/accounts_controller.rb:6:in `show'
Completed 200 OK in 13ms (Views: 0.3ms | ActiveRecord: 0.7ms | Allocations: 12348)


Started GET "/accounts/1" for 127.0.0.1 at 2021-09-06 01:33:15 +0200
Processing by AccountsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/accounts_controller.rb:5:in `show'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/accounts_controller.rb:5:in `show'
  [1m[36mAccountTransaction Load (0.1ms)[0m  [1m[34mSELECT "account_transactions".* FROM "account_transactions" WHERE "account_transactions"."account_id" = ? ORDER BY "account_transactions"."id" DESC LIMIT ?[0m  [["account_id", 1], ["LIMIT", 10]]
  ↳ app/controllers/accounts_controller.rb:6:in `show'
Completed 200 OK in 12ms (Views: 0.4ms | ActiveRecord: 0.6ms | Allocations: 12422)


Started GET "/accounts/1" for 127.0.0.1 at 2021-09-06 01:36:54 +0200
Processing by AccountsController#show as */*
  Parameters: {"id"=>"1"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/controllers/accounts_controller.rb:5:in `show'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/accounts_controller.rb:5:in `show'
  [1m[36mAccountTransaction Load (0.1ms)[0m  [1m[34mSELECT "account_transactions".* FROM "account_transactions" WHERE "account_transactions"."account_id" = ? ORDER BY "account_transactions"."id" DESC LIMIT ?[0m  [["account_id", 1], ["LIMIT", 10]]
  ↳ app/controllers/accounts_controller.rb:6:in `show'
Completed 200 OK in 17ms (Views: 0.5ms | ActiveRecord: 0.7ms | Allocations: 12451)


Started GET "/accounts/2" for 127.0.0.1 at 2021-09-06 01:36:58 +0200
Processing by AccountsController#show as */*
  Parameters: {"id"=>"2"}
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/accounts_controller.rb:5:in `show'
  [1m[36mAccountTransaction Load (0.1ms)[0m  [1m[34mSELECT "account_transactions".* FROM "account_transactions" WHERE "account_transactions"."account_id" = ? ORDER BY "account_transactions"."id" DESC LIMIT ?[0m  [["account_id", 2], ["LIMIT", 10]]
  ↳ app/controllers/accounts_controller.rb:6:in `show'
Completed 200 OK in 3ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 1413)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 01:38:36 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"50", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 23:38:36.200226"], ["updated_at", "2021-09-05 23:38:36.200226"]]
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "dc8ee291-dcb2-4a75-830e-037d51becc7a"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "dc8ee291-dcb2-4a75-830e-037d51becc7a"], ["account_id", 2], ["amount", 50.0], ["transaction_type", "deposit"], ["transfer_id", 3], ["created_at", "2021-09-05 23:38:36.213376"], ["updated_at", "2021-09-05 23:38:36.213376"]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:28:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "8d969f9e-ac56-4467-8631-766a2504da0d"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:28:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "8d969f9e-ac56-4467-8631-766a2504da0d"], ["account_id", 1], ["amount", 50.0], ["transaction_type", "withdraw"], ["transfer_id", 3], ["created_at", "2021-09-05 23:38:36.215495"], ["updated_at", "2021-09-05 23:38:36.215495"]]
  ↳ app/services/transfer_creator.rb:28:in `block in send_funds'
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:35:in `block in send_funds'
  [1m[36mAccount Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? AND "accounts"."id" != ? LIMIT ?[0m  [["account_number", "0a902c79-f705-45aa-a3d1-f8b2028c345c"], ["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:35:in `block in send_funds'
  [1m[36mAccount Update (0.1ms)[0m  [1m[33mUPDATE "accounts" SET "account_number" = ?, "balance" = ?, "updated_at" = ? WHERE "accounts"."id" = ?[0m  [["account_number", "0a902c79-f705-45aa-a3d1-f8b2028c345c"], ["balance", 150.0], ["updated_at", "2021-09-05 23:38:36.228175"], ["id", 2]]
  ↳ app/services/transfer_creator.rb:35:in `block in send_funds'
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:38:in `block in send_funds'
  [1m[36mAccount Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? AND "accounts"."id" != ? LIMIT ?[0m  [["account_number", "c1822486-4922-47ba-b915-dcce3b910df5"], ["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:38:in `block in send_funds'
  [1m[36mAccount Update (0.0ms)[0m  [1m[33mUPDATE "accounts" SET "account_number" = ?, "balance" = ?, "updated_at" = ? WHERE "accounts"."id" = ?[0m  [["account_number", "c1822486-4922-47ba-b915-dcce3b910df5"], ["balance", 9850.0], ["updated_at", "2021-09-05 23:38:36.232609"], ["id", 1]]
  ↳ app/services/transfer_creator.rb:38:in `block in send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:21:in `send_funds'
Completed 201 Created in 53ms (Views: 0.1ms | ActiveRecord: 3.3ms | Allocations: 31922)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 01:38:40 +0200
  
AbstractController::ActionNotFound (The action 'created' could not be found for TransfersController
Did you mean?  create):
  
actionpack (6.1.4.1) lib/abstract_controller/base.rb:160:in `process'
actionpack (6.1.4.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.1.4.1) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.1.4.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.1.4.1) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.1.4.1) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (6.1.4.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.1.4.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.1.4.1) lib/action_dispatch/routing/route_set.rb:842:in `call'
rack (2.2.3) lib/rack/etag.rb:27:in `call'
rack (2.2.3) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.3) lib/rack/head.rb:12:in `call'
activerecord (6.1.4.1) lib/active_record/migration.rb:601:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.1.4.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (6.1.4.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.1.4.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.1.4.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.1.4.1) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (6.1.4.1) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (6.1.4.1) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (6.1.4.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.1.4.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/static.rb:24:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.1.4.1) lib/action_dispatch/middleware/host_authorization.rb:98:in `call'
railties (6.1.4.1) lib/rails/engine.rb:539:in `call'
puma (5.4.0) lib/puma/configuration.rb:249:in `call'
puma (5.4.0) lib/puma/request.rb:77:in `block in handle_request'
puma (5.4.0) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.4.0) lib/puma/request.rb:76:in `handle_request'
puma (5.4.0) lib/puma/server.rb:440:in `process_client'
puma (5.4.0) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 01:59:44 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"50", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.7ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTransfer Create (0.5ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-05 23:59:44.533049"], ["updated_at", "2021-09-05 23:59:44.533049"]]
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "2fdcd2c2-9aeb-4ffc-abc5-821693e8b796"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.2ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "2fdcd2c2-9aeb-4ffc-abc5-821693e8b796"], ["account_id", 2], ["amount", 50.0], ["transaction_type", "deposit"], ["transfer_id", 4], ["created_at", "2021-09-05 23:59:44.543875"], ["updated_at", "2021-09-05 23:59:44.543875"]]
  ↳ app/services/transfer_creator.rb:22:in `block in send_funds'
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:28:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "e3b92d22-7eda-455a-81c0-881cabeeaf67"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:28:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.0ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "e3b92d22-7eda-455a-81c0-881cabeeaf67"], ["account_id", 1], ["amount", 50.0], ["transaction_type", "withdraw"], ["transfer_id", 4], ["created_at", "2021-09-05 23:59:44.545837"], ["updated_at", "2021-09-05 23:59:44.545837"]]
  ↳ app/services/transfer_creator.rb:28:in `block in send_funds'
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:35:in `block in send_funds'
  [1m[36mAccount Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? AND "accounts"."id" != ? LIMIT ?[0m  [["account_number", "9a8a9cd0-1c67-4500-800f-3b228f949ac4"], ["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:35:in `block in send_funds'
  [1m[36mAccount Update (0.0ms)[0m  [1m[33mUPDATE "accounts" SET "account_number" = ?, "balance" = ?, "updated_at" = ? WHERE "accounts"."id" = ?[0m  [["account_number", "9a8a9cd0-1c67-4500-800f-3b228f949ac4"], ["balance", 200.0], ["updated_at", "2021-09-05 23:59:44.555729"], ["id", 2]]
  ↳ app/services/transfer_creator.rb:35:in `block in send_funds'
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:38:in `block in send_funds'
  [1m[36mAccount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "accounts" WHERE "accounts"."account_number" = ? AND "accounts"."id" != ? LIMIT ?[0m  [["account_number", "bdd959aa-7f53-430b-a668-9e1b6c89578c"], ["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:38:in `block in send_funds'
  [1m[36mAccount Update (0.0ms)[0m  [1m[33mUPDATE "accounts" SET "account_number" = ?, "balance" = ?, "updated_at" = ? WHERE "accounts"."id" = ?[0m  [["account_number", "bdd959aa-7f53-430b-a668-9e1b6c89578c"], ["balance", 9800.0], ["updated_at", "2021-09-05 23:59:44.557562"], ["id", 1]]
  ↳ app/services/transfer_creator.rb:38:in `block in send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:21:in `send_funds'
Completed 201 Created in 47ms (Views: 0.1ms | ActiveRecord: 5.8ms | Allocations: 31891)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 02:27:42 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"50", "execution_date"=>"2021-09-01"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.7ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTransfer Create (0.6ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-06 00:27:42.352383"], ["updated_at", "2021-09-06 00:27:42.352383"]]
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:21:in `send_funds'
  [1m[36mTransfer Destroy (0.1ms)[0m  [1m[31mDELETE FROM "transfers" WHERE "transfers"."id" = ?[0m  [["id", 5]]
  ↳ app/services/transfer_creator.rb:21:in `send_funds'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:21:in `send_funds'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "b2eaa73f-7601-496f-ab5c-1ea279084efe"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "b2eaa73f-7601-496f-ab5c-1ea279084efe"], ["account_id", 2], ["amount", 50.0], ["transaction_type", "deposit"], ["transfer_id", 5], ["created_at", "2021-09-06 00:27:42.363353"], ["updated_at", "2021-09-06 00:27:42.363353"]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:22:in `send_funds'
Completed 422 Unprocessable Entity in 38ms (Views: 0.1ms | ActiveRecord: 3.8ms | Allocations: 20295)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 02:28:00 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"50", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:18:in `send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-06 00:28:00.840553"], ["updated_at", "2021-09-06 00:28:00.840553"]]
  ↳ app/services/transfer_creator.rb:18:in `send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:18:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:19:in `send_funds'
  [1m[36mTransfer Destroy (0.2ms)[0m  [1m[31mDELETE FROM "transfers" WHERE "transfers"."id" = ?[0m  [["id", 6]]
  ↳ app/services/transfer_creator.rb:19:in `send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:19:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "af034252-5922-45fa-9b6f-50fd09623def"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "af034252-5922-45fa-9b6f-50fd09623def"], ["account_id", 2], ["amount", 50.0], ["transaction_type", "deposit"], ["transfer_id", 6], ["created_at", "2021-09-06 00:28:00.857334"], ["updated_at", "2021-09-06 00:28:00.857334"]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:22:in `send_funds'
Completed 422 Unprocessable Entity in 30ms (Views: 0.1ms | ActiveRecord: 2.5ms | Allocations: 21301)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 02:28:19 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"50", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:18:in `send_funds'
  [1m[36mTransfer Create (0.5ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-06 00:28:19.913376"], ["updated_at", "2021-09-06 00:28:19.913376"]]
  ↳ app/services/transfer_creator.rb:18:in `send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:18:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:19:in `send_funds'
  [1m[36mTransfer Destroy (0.2ms)[0m  [1m[31mDELETE FROM "transfers" WHERE "transfers"."id" = ?[0m  [["id", 7]]
  ↳ app/services/transfer_creator.rb:19:in `send_funds'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:19:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "80347a6d-2630-4067-8db3-6a0bb3e7077f"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "80347a6d-2630-4067-8db3-6a0bb3e7077f"], ["account_id", 2], ["amount", 50.0], ["transaction_type", "deposit"], ["transfer_id", 7], ["created_at", "2021-09-06 00:28:19.927807"], ["updated_at", "2021-09-06 00:28:19.927807"]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:22:in `send_funds'
Completed 422 Unprocessable Entity in 31ms (Views: 0.1ms | ActiveRecord: 3.3ms | Allocations: 21296)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 02:29:32 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"50", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:18:in `send_funds'
  [1m[36mTransfer Create (0.3ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-06 00:29:32.921232"], ["updated_at", "2021-09-06 00:29:32.921232"]]
  ↳ app/services/transfer_creator.rb:18:in `send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:18:in `send_funds'
  [1m[36mTransfer Destroy (0.4ms)[0m  [1m[31mDELETE FROM "transfers" WHERE "transfers"."id" = ?[0m  [["id", 8]]
  ↳ app/services/transfer_creator.rb:19:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccountTransaction Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "account_transactions" WHERE "account_transactions"."transaction_number" = ? LIMIT ?[0m  [["transaction_number", "27b13977-1932-44e4-810d-b85468d67b1f"], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mAccountTransaction Create (0.1ms)[0m  [1m[32mINSERT INTO "account_transactions" ("transaction_number", "account_id", "amount", "transaction_type", "transfer_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["transaction_number", "27b13977-1932-44e4-810d-b85468d67b1f"], ["account_id", 2], ["amount", 50.0], ["transaction_type", "deposit"], ["transfer_id", 8], ["created_at", "2021-09-06 00:29:32.931163"], ["updated_at", "2021-09-06 00:29:32.931163"]]
  ↳ app/services/transfer_creator.rb:23:in `block in send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/services/transfer_creator.rb:22:in `send_funds'
Completed 422 Unprocessable Entity in 24ms (Views: 0.1ms | ActiveRecord: 2.4ms | Allocations: 20443)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 02:31:35 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"50", "execution_date"=>"2021-09-01"}
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTransfer Create (0.5ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-06 00:31:35.656620"], ["updated_at", "2021-09-06 00:31:35.656620"]]
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:20:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:43:in `rescue in send_funds'
  [1m[36mTransfer Destroy (0.2ms)[0m  [1m[31mDELETE FROM "transfers" WHERE "transfers"."id" = ?[0m  [["id", 9]]
  ↳ app/services/transfer_creator.rb:43:in `rescue in send_funds'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:43:in `rescue in send_funds'
Completed 422 Unprocessable Entity in 20ms (Views: 0.3ms | ActiveRecord: 2.9ms | Allocations: 12749)


Started POST "/transfers" for 127.0.0.1 at 2021-09-06 02:31:47 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"50", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:18:in `send_funds'
  [1m[36mTransfer Create (2.9ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-06 00:31:47.789415"], ["updated_at", "2021-09-06 00:31:47.789415"]]
  ↳ app/services/transfer_creator.rb:18:in `send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:18:in `send_funds'
Completed 500 Internal Server Error in 27ms (ActiveRecord: 4.1ms | Allocations: 12573)


  
NameError (undefined local variable or method `transfer' for #<TransferCreator:0x000000011ffd9358 @transferor_id="1", @transferee_id="2", @amount=50.0, @execution_date="2021-09-01", @transfer=#<Transfer id: 10, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-06 00:31:47.789415000 +0000", updated_at: "2021-09-06 00:31:47.789415000 +0000">>
Did you mean?  @transfer):
  
app/services/transfer_creator.rb:19:in `send_funds'
app/controllers/transfers_controller.rb:9:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 02:32:04 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"50", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:18:in `send_funds'
  [1m[36mTransfer Create (0.4ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-06 00:32:04.619894"], ["updated_at", "2021-09-06 00:32:04.619894"]]
  ↳ app/services/transfer_creator.rb:18:in `send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:18:in `send_funds'
Completed 500 Internal Server Error in 13ms (ActiveRecord: 1.7ms | Allocations: 11427)


  
SystemExit (11):
  
app/services/transfer_creator.rb:19:in `abort'
app/services/transfer_creator.rb:19:in `send_funds'
app/controllers/transfers_controller.rb:9:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 02:32:15 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"50", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.0ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:18:in `send_funds'
  [1m[36mTransfer Create (0.3ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-06 00:32:15.933546"], ["updated_at", "2021-09-06 00:32:15.933546"]]
  ↳ app/services/transfer_creator.rb:18:in `send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:18:in `send_funds'
Completed 500 Internal Server Error in 16ms (ActiveRecord: 1.3ms | Allocations: 11467)


  
SystemExit (#<Transfer id: 12, transferor_id: 1, transferee_id: 2, execution_date: "2021-09-01", created_at: "2021-09-06 00:32:15.933546000 +0000", updated_at: "2021-09-06 00:32:15.933546000 +0000">):
  
app/services/transfer_creator.rb:19:in `abort'
app/services/transfer_creator.rb:19:in `send_funds'
app/controllers/transfers_controller.rb:9:in `create'
Started POST "/transfers" for 127.0.0.1 at 2021-09-06 02:32:23 +0200
Processing by TransfersController#create as */*
  Parameters: {"transferor_id"=>"1", "transferee_id"=>"2", "amount"=>"50", "execution_date"=>"2021-09-01"}
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:10:in `send_funds'
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/services/transfer_creator.rb:11:in `send_funds'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/services/transfer_creator.rb:18:in `send_funds'
  [1m[36mTransfer Create (0.2ms)[0m  [1m[32mINSERT INTO "transfers" ("transferor_id", "transferee_id", "execution_date", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["transferor_id", 1], ["transferee_id", 2], ["execution_date", "2021-09-01"], ["created_at", "2021-09-06 00:32:23.427023"], ["updated_at", "2021-09-06 00:32:23.427023"]]
  ↳ app/services/transfer_creator.rb:18:in `send_funds'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/services/transfer_creator.rb:18:in `send_funds'
Completed 500 Internal Server Error in 12ms (ActiveRecord: 1.2ms | Allocations: 11482)


  
SystemExit (13):
  
app/services/transfer_creator.rb:19:in `abort'
app/services/transfer_creator.rb:19:in `send_funds'
app/controllers/transfers_controller.rb:9:in `create'
